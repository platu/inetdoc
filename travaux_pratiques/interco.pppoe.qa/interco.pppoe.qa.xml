<?xml version='1.0'?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V5.0//EN"
"/usr/share/xml/docbook/schema/dtd/5.0/docbook.dtd" [

<!ENTITY author		SYSTEM "author.xml">
<!ENTITY legal		SYSTEM "legal.xml">

<!-- urls -->
<!ENTITY % rfc_urls SYSTEM 'rfc.urls.xml'>
%rfc_urls;

<!ENTITY % inetdoc_urls SYSTEM 'inetdoc.urls.xml'>
%inetdoc_urls;

<!ENTITY url.ppp-wikipedia
'<link xmlns="http://docbook.org/ns/docbook" xlink:href="https://en.wikipedia.org/wiki/Point-to-Point_Protocol">
<citetitle>Point-to-Point Protocol</citetitle></link>'>

<!ENTITY url.pppoe-wikipedia
'<link xmlns="http://docbook.org/ns/docbook" xlink:href="https://en.wikipedia.org/wiki/Point-to-point_protocol_over_Ethernet">
<citetitle>Point-to-point protocol over Ethernet</citetitle></link>'>

<!ENTITY url.cheatsheet
'<link xmlns="http://docbook.org/ns/docbook" xlink:href="https://www.inetdoc.net/pdf/iproute-cheatsheet.pdf">
<citetitle>Antisèche réseau</citetitle></link>'>

<!ENTITY % w3centities-f PUBLIC "-//W3C//ENTITIES Combined Set//EN//XML"
	"http://www.w3.org/2003/entities/2007/w3centities-f.ent">
%w3centities-f;
]>

<article xml:id='interco.pppoe.qa' xml:lang='fr'>

<info>
	<title>Topologie Hub &amp; Spoke avec le protocole PPPoE</title>

	&author;
	<abstract>
	<para>
	<informaltable frame='none' pgwide='1'>
	<tgroup cols='2' align='left' colsep='0' rowsep='0'>
	<colspec colwidth='1*'/>
	<colspec colwidth='1*'/>
	<tbody>
    <row>
	<entry>
	<inlinemediaobject>
	<imageobject role='html'>
		<imagedata fileref='images/pppoe-hub-and-spoke-logical-topology.png' format='PNG' width='480px' scalefit='1'/>
	</imageobject>
	<imageobject role='fo'>
		<imagedata fileref='images/pppoe-hub-and-spoke-logical-topology.png' format='PNG' width='7cm' scalefit='1'/>
	</imageobject>
	</inlinemediaobject>
	</entry>
    <entry valign='top'>
	<para>Ce support de travaux pratiques est une illustration d'une topologie
	réseau classique baptisée <wordasword>Hub &amp; Spoke</wordasword>. Le
	<wordasword>Hub</wordasword> est un routeur qui concentre tous les flux des
	routeurs d'extrémités appelés <wordasword>Spoke</wordasword>. Les liaisons
	entre le <wordasword>Hub</wordasword> et les routeurs
	<wordasword>Spoke</wordasword> sont point à point et utilisent le protocole
	<acronym>PPP</acronym>. Avec la généralisation de la fibre optique dans les
	réseaux étendus (<acronym>WAN</acronym>), on doit encapsuler les trames
	<acronym>PPP</acronym> dans un <acronym>VLAN</acronym> Ethernet à l'aide de
	la technologie <acronym>PPPoE</acronym>.</para>

	<para>Les manipulations proposées reprennent en grande partie celles du
	support &url.interco.pppoe-cloud; en les adaptant à la topologie en
	triangle.</para> 
	</entry>
	</row>
	</tbody>
	</tgroup>
	</informaltable>
	</para>
	</abstract>

	<keywordset>
		<keyword>ppp</keyword>
		<keyword>pppoe</keyword>
		<keyword>chap</keyword>
		<keyword>route</keyword>
		<keyword>forward</keyword>
		<keyword>trunk</keyword>
		<keyword>vlan</keyword>
	</keywordset>
</info>

<sect1 xml:id='interco.pppoe.qa.legal.meta'>
&legal;

<sect2 xml:id='interco.pppoe.qa.meta'>
	<title>Méta-information</title>

	<para>Cet article est écrit avec <link
		xlink:href="http://www.docbook.org"><citetitle>DocBook</citetitle></link>
		XML sur un système <link
		xlink:href="https://www.debian.org"><citetitle>Debian
		GNU/Linux</citetitle></link>. Il est disponible en version
		imprimable au format PDF&nbsp;: <link
		xlink:href="https://www.inetdoc.net/pdf/__printbasename__"><literal>__printbasename__</literal></link>.</para>

	<para>Toutes les commandes utilisées dans ce document ne sont pas
		spécifiques à une version particulière des systèmes UNIX ou GNU/Linux.
		C'est la distribution <citetitle>Debian GNU/Linux</citetitle> qui est
		utilisée pour les tests présentés. Voici une liste des paquets
		contenant les commandes&nbsp;:</para>

<itemizedlist>
	<listitem>
	<para><application>iproute2</application> - Outils de contrôle du trafic et
		du réseau</para>
	</listitem>
	<listitem>
	<para><application>ifupdown</application> - High level tools to configure
		network interfaces</para>
    </listitem>
	<listitem>
	<para><application>iputils-ping</application> - Tools to test the
		reachability of network hosts</para>
	</listitem>
	<listitem>
	<para><application>iputils-tracepath</application> - Tools to trace the
		network path to a remote host</para>
	</listitem>
	<listitem>
	<para><application>ppp</application> - Point-to-Point Protocol (PPP) -
		daemon</para>
	</listitem>
	<listitem>
	<para><application>pppoe</application> - PPP over Ethernet driver</para>
	</listitem>
</itemizedlist>
</sect2>

<sect2 xml:id='interco.pppoe.qa.convtypo'>
	<title>Conventions typographiques</title>

	<para>Tous les exemples d'exécution des commandes sont précédés d'une
		invite utilisateur ou <wordasword>prompt</wordasword> spécifique au
		niveau des droits utilisateurs nécessaires sur le système.</para>

	<itemizedlist>
	<listitem>
	<para>Toute commande précédée de l'invite <prompt>$</prompt> ne nécessite
		aucun privilège particulier et peut être utilisée au niveau utilisateur
		simple.</para>
	</listitem>
	<listitem>
	<para>Toute commande précédée de l'invite <prompt>#</prompt> nécessite les
		privilèges du super-utilisateur.</para>
	</listitem>
	</itemizedlist>
</sect2>

<sect2 xml:id='interco.pppoe.qa.troubleshoot'>
	<title>Aide à la mise au point</title>

	<para>Afin de résoudre les problèmes de connexion et de configuration, la
		journalisation système constitue le principal canal
		d'information.</para>

	<para>L'affichage des messages système est géré par le démon <systemitem
		class='daemon'>rsyslogd</systemitem>. Pour consulter ces messages,
		il faut lire le contenu des fichiers du répertoire <filename
		class='directory'>/var/log/</filename>. Dans le cas des travaux
		pratiques, les informations nécessaires à la mise au point des
		connexions réseau se trouvent dans le fichier
		<filename>/var/log/syslog</filename>.</para>

	<para>Pour visualiser les dernières lignes d'un journal système à la
		console on peut utiliser la commande <command>tail</command>.</para>

<screen><prompt>$</prompt> tail -n 50 -f /var/log/syslog</screen>

	<para>Du point de vue droits sur le système de fichiers, la commande
		<command>tail</command> peut être utilisée au niveau utilisateur normal
		dès lors que celui-ci appartient au groupe
		<systemitem>adm</systemitem>. Les commandes <command>id</command> et
		<command>groups</command> permettent de connaître les groupes auxquels
		l'utilisateur courant appartient.</para>
</sect2>
</sect1>

<?custom-pagebreak?>
<sect1 xml:id='interco.pppoe.qa.hub-and-spoke'>
	<title>Topologie Hub &amp; Spoke - Protocole PPPoE</title>

	<para>Le Protocole Point à Point (<acronym>PPP</acronym>) est utilisé pour
	établir une communication directe entre deux hôtes. Il relie deux routeurs
	de façon logique au dessus d'une topologie de réseau physique qui peut
	comprendre divers composants et différentes technologies. Il permet aux
	deux extrémités en communication de négocier des paramètres de transmission
	tels que l'authentification, la compression et l'attribution d'adresses de
	couche réseau. Dans ce document, on utilise le protocole
	<acronym>PPP</acronym> au dessus d'un réseau Ethernet qui représente la
	technologie mise en œuvre par un opérateur Internet.</para>

	<para>Comme un Ethernet est par définition un réseau de diffusion, il est
	nécessaire d'introduire un protocole intermédiaire appelé
	<acronym>PPPoE</acronym> qui sert à identifier les deux hôtes de la liaison
	logique point à point.</para>

	<para>Ce support met en œuvre une “figure“ classique appelée topologie
	<citetitle>Hub &amp; Spoke</citetitle>. Voici une description des rôles des
	différents routeurs de cette topologie.</para>
	
	<variablelist>
	<varlistentry xml:id='interco.pppoe.qa.hub-role'>
		<term><citetitle>Hub</citetitle></term>
	<listitem>
	<para>Traduit mot à mot, le rôle <wordasword>Hub</wordasword> correspond à
	un concentrateur.</para>

	<para>Il concentre tous les flux réseau des routeurs qui ont le rôle
	<wordasword>Spoke</wordasword>. En effet, les échanges entre deux routeurs
	<wordasword>Spoke</wordasword> doivent passer par le routeur
	<wordasword>Hub</wordasword>.</para>

	<para>On lui attribue aussi la fonction de <wordasword>Broadband Remote
	Access Server</wordasword> ou <acronym>BRAS</acronym>. Dans notre contexte,
	cette fonction se caractérise par le fait que ce routeur détient le plan
	d'adressage. C'est lui qui a la responsabilité de délivrer les adresses
	<acronym>IP</acronym> lors de l'initiation de la session
	<acronym>PPP</acronym>.</para>
	</listitem>
	</varlistentry>

	<varlistentry xml:id='interco.pppoe.qa.spoke-role'>
		<term><citetitle>Spoke</citetitle></term>
	<listitem>
	<para>Le rôle <wordasword>Spoke</wordasword> correspond à un réseau
	d'extrémité au delà duquel on ne trouve aucune interconnexion. Le routeur
	<wordasword>Spoke</wordasword> doit s'adresser au routeur
	<acronym>Hub</acronym> dès qu'il veut acheminer un flux réseau. Il s'agit
	bien d'un routeur d'extrémité qui ne dispose d'aucun chemin alternatif pour
	joindre l'Internet.</para> 

	<para>Dans les réseaux domestiques, la «box» correspond bien au rôle
	<wordasword>Spoke</wordasword> dans la mesure où elle se voit attribuer des
	adresses <acronym>IPv4</acronym> et <acronym>IPv6</acronym> publiques par
	le fournisseur d'accès Internet. Les seules informations qu'elle détient
	sont les authentifiants du client de l'opérateur.</para>
	</listitem>
	</varlistentry>
	</variablelist>

	<mediaobject>
	<imageobject role='fo'>
		<imagedata fileref='images/pppoe-hub-and-spoke-logical-topology.png' format='PNG'
		width='12cm' scalefit='1' align='center'/>
	</imageobject>
	<imageobject role='html'>
		<imagedata fileref='images/pppoe-hub-and-spoke-logical-topology.png' format='PNG'
		width='640px' scalefit='1' align='center'/>
	</imageobject>
	<textobject>
		<phrase>Topologie entre deux routeurs <wordasword>Hub</wordasword> et
		<wordasword>Spoke</wordasword> avec <acronym>PPPoE</acronym></phrase>
	</textobject>
	<caption>
		<para><link xlink:href='images/pppoe-topology.png'>Topologie entre deux
		routeurs <wordasword>Hub</wordasword> et <wordasword>Spoke</wordasword>
		avec <acronym>PPPoE</acronym></link></para>
	</caption>
	</mediaobject>

	<para>Comme le montre le graphique ci-dessus, l'opérateur distingue 4
	réseaux ou <acronym>VLANs</acronym> différents.</para>

	<variablelist>
	<varlistentry>
	<term>Raccordement Internet</term>
	<term>Rouge</term>
	<listitem>
		<para>Ce réseau caractérise l'accès à l'Internet. Il s'agit de la
		dorsale de l'opérateur. Dans notre cas, le plan d'adressage est défini
		dans le document &url.infra.tp;.</para> 
	</listitem>
	</varlistentry>
	<varlistentry>
	<term>Management/Supervision</term>
	<term>Violet</term>
	<listitem>
		<para>Ce réseau correspond à la gestion des équipements et à la
		supervision des liens en fibre optique. Il n'utilise que des adresses
		de lien local <acronym>IPv6</acronym>.</para>  
	</listitem>
	</varlistentry>
	<varlistentry>
	<term>Données de l'entreprise cliente</term>
	<term>Orange</term>
	<listitem>
		<para>C'est sur ce réseau que la session <acronym>PPP</acronym> est
		établie. L'entreprise cliente s'authentifie auprès du
		<acronym>BRAS</acronym> de l'opérateur et obtient en échange une
		adresse <acronym>IPv4</acronym> et une adresse <acronym>IPv6</acronym>
		qui permettent d'accéder à Internet.</para>
	</listitem>
	</varlistentry>
	<varlistentry>
	<term>Réseau de l'entreprise cliente</term>
	<term>Vert</term>
	<listitem>
		<para>C'est le réseau des services hébergés sur son propre site par
		l'entreprise clients de l'opérateur. Ici, on choisit de déployer
		plusieurs conteneurs pour illustrer plusieurs hôtes ou serveurs dont le
		trafic doit transiter par la session <acronym>PPP</acronym>.</para>
	</listitem>
	</varlistentry>
	</variablelist>
</sect1>
  
<?custom-pagebreak?>
<sect1 xml:id='interco.pppoe.qa.hub-and-spoke.addressing'>
	<title>Plan d'adressage pour les topologies en triangle</title>

	<table xml:id='interco.pppoe.qa.hub-and-spoke.g1.addressing' frame='all' pgwide='1'>
		<title>Affectation des rôles, des numéros de VLANs, des adresses et des
		authentifiants - Groupe 1</title>
	<tgroup cols='7' align='left' colsep='1' rowsep='1'>
	<colspec colnum='1' colwidth='1*'/>
	<colspec colnum='2' colwidth='1*'/>
	<colspec colnum='3' colwidth='1*'/>
	<colspec colnum='4' colwidth='1*'/>
	<colspec colnum='5' colwidth='1.5*'/>
	<colspec colnum='6' colwidth='1*'/>
	<colspec colnum='7' colwidth='2*'/>
	<thead>
	<row>
		<?dbfo bgcolor="#333" ?>
		<?dbfo color="#fff" ?>
		<entry>Fédéraion de planètes</entry>
		<entry>Rôle</entry>
		<entry>VLAN</entry>
		<entry>Numéro</entry>
		<entry>Type</entry>
		<entry>Destination</entry>
		<entry>Adresse/Authentification</entry>
	</row>
	</thead>
	<tbody>
		<!-- Fédération 1 -->
		<row>
			<entry morerows='21' valign='middle'>
			Christophsis<?custom-linebreak?>
			Corellia<?custom-linebreak?>
			Delay
			</entry>
			<entry morerows='4' valign='middle'>Hub200</entry>
			<entry>Rouge</entry>
			<entry>-</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>172.17.64.129/25</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>2001:678:3fc:64::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>220</entry>
			<entry>Lien local</entry>
			<entry>Spoke201</entry>
			<entry><systemitem class='ipaddress'>fe80:dc::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>221</entry>
			<entry>Point à point</entry>
			<entry>Spoke201</entry>
			<entry><systemitem class='ipaddress'>10.2.21.1:10.2.21.2</systemitem></entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>222</entry>
			<entry>Lien local</entry>
			<entry>Spoke202</entry>
			<entry><systemitem class='ipaddress'>fe80:de::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>223</entry>
			<entry>Point à point</entry>
			<entry>Spoke202</entry>
			<entry><systemitem class='ipaddress'>10.2.23.1:10.2.23.2</systemitem></entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke201</entry>
			<entry>Violet</entry>
			<entry>220</entry>
			<entry>Lien local</entry>
			<entry>Hub200</entry>
			<entry><systemitem class='ipaddress'>fe80:dc::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>221</entry>
			<entry>Authentifiants</entry>
			<entry>Hub200</entry>
			<entry align='center'><systemitem>5p0k201 / 0r4ng3201</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>201</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.20.1.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:c9::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke202</entry>
			<entry>Violet</entry>
			<entry>222</entry>
			<entry>Lien local</entry>
			<entry>Hub200</entry>
			<entry><systemitem class='ipaddress'>fe80:de::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>223</entry>
			<entry>Authentifiants</entry>
			<entry>Hub200</entry>
			<entry align='center'><systemitem>5p0k202 / 0r4ng3202</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>202</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.20.2.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:ca::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='4' valign='middle'>Hub201</entry>
			<entry>Rouge</entry>
			<entry>-</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>172.20.135.65/28</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>2001:678:3fc:87::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>224</entry>
			<entry>Lien local</entry>
			<entry>Spoke203</entry>
			<entry><systemitem class='ipaddress'>fe80:e0::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>225</entry>
			<entry>Point à point</entry>
			<entry>Spoke203</entry>
			<entry><systemitem class='ipaddress'>10.2.25.1:10.2.25.2</systemitem></entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>226</entry>
			<entry>Lien local</entry>
			<entry>Spoke204</entry>
			<entry><systemitem class='ipaddress'>fe80:e2::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>227</entry>
			<entry>Point à point</entry>
			<entry>Spoke204</entry>
			<entry><systemitem class='ipaddress'>10.2.27.1:10.2.27.2</systemitem></entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke203</entry>
			<entry>Violet</entry>
			<entry>224</entry>
			<entry>Lien local</entry>
			<entry>Hub200</entry>
			<entry><systemitem class='ipaddress'>fe80:e0::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>225</entry>
			<entry>Authentifiants</entry>
			<entry>Hub201</entry>
			<entry align='center'><systemitem>5p0k201 / 0r4ng3201</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>203</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.2.203.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:cb::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke204</entry>
			<entry>Violet</entry>
			<entry>226</entry>
			<entry>Lien local</entry>
			<entry>Hub201</entry>
			<entry><systemitem class='ipaddress'>fe80:e2::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>227</entry>
			<entry>Authentifiants</entry>
			<entry>Hub201</entry>
			<entry align='center'><systemitem>5p0k227 / 0r4ng3227</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>204</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.2.204.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:cc::1/64</systemitem>
			</entry>
		</row>
		<!-- Fédération 2 -->
		<row>
			<entry morerows='21' valign='middle'>
			Coruscant<?custom-linebreak?>
			Dagobah<?custom-linebreak?>
			Endor
			</entry>
			<entry morerows='4' valign='middle'>Hub30</entry>
			<entry>Rouge</entry>
			<entry>-</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.0.10.33/27</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>2001:678:3fc:13c::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>408</entry>
			<entry>Lien local</entry>
			<entry>Spoke31</entry>
			<entry><systemitem class='ipaddress'>fe80:198::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>409</entry>
			<entry>Point à point</entry>
			<entry>Spoke31</entry>
			<entry><systemitem class='ipaddress'>10.4.9.1:10.4.9.2</systemitem></entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>410</entry>
			<entry>Lien local</entry>
			<entry>Spoke32</entry>
			<entry><systemitem class='ipaddress'>fe80:19a::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>411</entry>
			<entry>Point à point</entry>
			<entry>Spoke32</entry>
			<entry><systemitem class='ipaddress'>10.4.11.1:10.4.11.2</systemitem></entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke31</entry>
			<entry>Violet</entry>
			<entry>408</entry>
			<entry>Lien local</entry>
			<entry>Hub30</entry>
			<entry><systemitem class='ipaddress'>fe80:198::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>409</entry>
			<entry>Authentifiants</entry>
			<entry>Hub30</entry>
			<entry align='center'><systemitem>5p0k31 / Gr33n31</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>31</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.31.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:1f::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke32</entry>
			<entry>Violet</entry>
			<entry>410</entry>
			<entry>Lien local</entry>
			<entry>Hub30</entry>
			<entry><systemitem class='ipaddress'>fe80:19a::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>411</entry>
			<entry>Authentifiants</entry>
			<entry>Hub30</entry>
			<entry align='center'><systemitem>5p0k32 / Gr33n32</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>32</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.32.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:20::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='4' valign='middle'>Hub40</entry>
			<entry>Rouge</entry>
			<entry>-</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.8.11.9/29</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>2001:678:3fc:14b::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>412</entry>
			<entry>Lien local</entry>
			<entry>Spoke41</entry>
			<entry><systemitem class='ipaddress'>fe80:19c::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>413</entry>
			<entry>Point à point</entry>
			<entry>Spoke41</entry>
			<entry><systemitem class='ipaddress'>10.4.13.1:10.4.13.2</systemitem></entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>414</entry>
			<entry>Lien local</entry>
			<entry>Spoke42</entry>
			<entry><systemitem class='ipaddress'>fe80:19e::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>415</entry>
			<entry>Point à point</entry>
			<entry>Spoke42</entry>
			<entry><systemitem class='ipaddress'>10.4.15.1:10.4.15.2</systemitem></entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke41</entry>
			<entry>Violet</entry>
			<entry>412</entry>
			<entry>Lien local</entry>
			<entry>Hub40</entry>
			<entry><systemitem class='ipaddress'>fe80:19c::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>413</entry>
			<entry>Authentifiants</entry>
			<entry>Hub40</entry>
			<entry align='center'><systemitem>5p0k41 / Gr33n41</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>41</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.41.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:29::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke42</entry>
			<entry>Violet</entry>
			<entry>414</entry>
			<entry>Lien local</entry>
			<entry>Hub40</entry>
			<entry><systemitem class='ipaddress'>fe80:19e::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>415</entry>
			<entry>Authentifiants</entry>
			<entry>Hub40</entry>
			<entry align='center'><systemitem>5p0k42 / Gr33n42</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>42</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.42.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:2a::1/64</systemitem>
			</entry>
		</row>
		<!-- Fédération 3 -->
		<row>
			<entry morerows='21' valign='middle'>
			Felucia<?custom-linebreak?>
			Geonosis<?custom-linebreak?>
			Hoth
			</entry>
			<entry morerows='4' valign='middle'>Hub50</entry>
			<entry>Rouge</entry>
			<entry>-</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>192.168.12.17/29</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>2001:678:3fc:138::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>416</entry>
			<entry>Lien local</entry>
			<entry>Spoke51</entry>
			<entry><systemitem class='ipaddress'>fe80:1a0::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>417</entry>
			<entry>Point à point</entry>
			<entry>Spoke51</entry>
			<entry><systemitem class='ipaddress'>10.4.17.1:10.4.17.2</systemitem></entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>418</entry>
			<entry>Lien local</entry>
			<entry>Spoke52</entry>
			<entry><systemitem class='ipaddress'>fe80:1a2::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>419</entry>
			<entry>Point à point</entry>
			<entry>Spoke52</entry>
			<entry><systemitem class='ipaddress'>10.4.19.1:10.4.19.2</systemitem></entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke51</entry>
			<entry>Violet</entry>
			<entry>416</entry>
			<entry>Lien local</entry>
			<entry>Hub50</entry>
			<entry><systemitem class='ipaddress'>fe80:1a0::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>417</entry>
			<entry>Authentifiants</entry>
			<entry>Hub50</entry>
			<entry align='center'><systemitem>5p0k51 / Gr33n51</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>51</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.51.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:33::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke52</entry>
			<entry>Violet</entry>
			<entry>418</entry>
			<entry>Lien local</entry>
			<entry>Hub50</entry>
			<entry><systemitem class='ipaddress'>fe80:1a2::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>419</entry>
			<entry>Authentifiants</entry>
			<entry>Hub50</entry>
			<entry align='center'><systemitem>5p0k52 / Gr33n52</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>52</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.52.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:34::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='4' valign='middle'>Hub60</entry>
			<entry>Rouge</entry>
			<entry>-</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>192.168.10.81/28</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>2001:678:3fc:145::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>420</entry>
			<entry>Lien local</entry>
			<entry>Spoke61</entry>
			<entry><systemitem class='ipaddress'>fe80:1a4::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>421</entry>
			<entry>Point à point</entry>
			<entry>Spoke61</entry>
			<entry><systemitem class='ipaddress'>10.4.21.1:10.4.21.2</systemitem></entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>422</entry>
			<entry>Lien local</entry>
			<entry>Spoke62</entry>
			<entry><systemitem class='ipaddress'>fe80:1a6::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>423</entry>
			<entry>Point à point</entry>
			<entry>Spoke62</entry>
			<entry><systemitem class='ipaddress'>10.4.23.1:10.4.23.2</systemitem></entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke61</entry>
			<entry>Violet</entry>
			<entry>420</entry>
			<entry>Lien local</entry>
			<entry>Hub60</entry>
			<entry><systemitem class='ipaddress'>fe80:1a4::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>421</entry>
			<entry>Authentifiants</entry>
			<entry>Hub60</entry>
			<entry align='center'><systemitem>5p0k61 / Gr33n61</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>61</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.61.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:3d::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke62</entry>
			<entry>Violet</entry>
			<entry>422</entry>
			<entry>Lien local</entry>
			<entry>Hub60</entry>
			<entry><systemitem class='ipaddress'>fe80:1a6::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>423</entry>
			<entry>Authentifiants</entry>
			<entry>Hub60</entry>
			<entry align='center'><systemitem>5p0k62 / Gr33n62</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>62</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.62.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:3e::1/64</systemitem>
			</entry>
		</row>
		<!-- Fédération 4 -->
		<row>
			<entry morerows='21' valign='middle'>
			Jakku<?custom-linebreak?>
			Kamino<?custom-linebreak?>
			Mustafar
			</entry>
			<entry morerows='4' valign='middle'>Hub70</entry>
			<entry>Rouge</entry>
			<entry>-</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.31.1.145/28</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>2001:678:3fc:137::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>424</entry>
			<entry>Lien local</entry>
			<entry>Spoke71</entry>
			<entry><systemitem class='ipaddress'>fe80:1a8::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>425</entry>
			<entry>Point à point</entry>
			<entry>Spoke71</entry>
			<entry><systemitem class='ipaddress'>10.4.25.1:10.4.25.2</systemitem></entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>426</entry>
			<entry>Lien local</entry>
			<entry>Spoke72</entry>
			<entry><systemitem class='ipaddress'>fe80:1aa::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>427</entry>
			<entry>Point à point</entry>
			<entry>Spoke72</entry>
			<entry><systemitem class='ipaddress'>10.4.27.1:10.4.27.2</systemitem></entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke71</entry>
			<entry>Violet</entry>
			<entry>424</entry>
			<entry>Lien local</entry>
			<entry>Hub70</entry>
			<entry><systemitem class='ipaddress'>fe80:1a8::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>425</entry>
			<entry>Authentifiants</entry>
			<entry>Hub70</entry>
			<entry align='center'><systemitem>5p0k71 / Gr33n71</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>71</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.71.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:47::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke72</entry>
			<entry>Violet</entry>
			<entry>426</entry>
			<entry>Lien local</entry>
			<entry>Hub70</entry>
			<entry><systemitem class='ipaddress'>fe80:1aa::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>427</entry>
			<entry>Authentifiants</entry>
			<entry>Hub50</entry>
			<entry align='center'><systemitem>5p0k72 / Gr33n72</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>72</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.72.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:48::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='4' valign='middle'>Hub80</entry>
			<entry>Rouge</entry>
			<entry>-</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.9.15.17/29</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>2001:678:3fc:150::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>428</entry>
			<entry>Lien local</entry>
			<entry>Spoke81</entry>
			<entry><systemitem class='ipaddress'>fe80:1ac::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>429</entry>
			<entry>Point à point</entry>
			<entry>Spoke81</entry>
			<entry><systemitem class='ipaddress'>10.4.29.1:10.4.29.2</systemitem></entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>430</entry>
			<entry>Lien local</entry>
			<entry>Spoke82</entry>
			<entry><systemitem class='ipaddress'>fe80:1ae::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>431</entry>
			<entry>Point à point</entry>
			<entry>Spoke82</entry>
			<entry><systemitem class='ipaddress'>10.4.31.1:10.4.31.2</systemitem></entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke81</entry>
			<entry>Violet</entry>
			<entry>428</entry>
			<entry>Lien local</entry>
			<entry>Hub80</entry>
			<entry><systemitem class='ipaddress'>fe80:1ac::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>429</entry>
			<entry>Authentifiants</entry>
			<entry>Hub80</entry>
			<entry align='center'><systemitem>5p0k81 / Gr33n81</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>81</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.81.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:51::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke82</entry>
			<entry>Violet</entry>
			<entry>430</entry>
			<entry>Lien local</entry>
			<entry>Hub80</entry>
			<entry><systemitem class='ipaddress'>fe80:1ae::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>431</entry>
			<entry>Authentifiants</entry>
			<entry>Hub80</entry>
			<entry align='center'><systemitem>5p0k82 / Gr33n82</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>82</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.82.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:52::1/64</systemitem>
			</entry>
		</row>
		<!-- Fédération 5 -->
		<row>
			<entry morerows='21' valign='middle'>
			Naboo<?custom-linebreak?>
			Tatooine<?custom-linebreak?>
			Tython
			</entry>
			<entry morerows='4' valign='middle'>Hub90</entry>
			<entry>Rouge</entry>
			<entry>-</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.30.6.65/28</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>2001:678:3fc:132::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>432</entry>
			<entry>Lien local</entry>
			<entry>Spoke91</entry>
			<entry><systemitem class='ipaddress'>fe80:1b0::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>433</entry>
			<entry>Point à point</entry>
			<entry>Spoke91</entry>
			<entry><systemitem class='ipaddress'>10.4.33.1:10.4.33.2</systemitem></entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>434</entry>
			<entry>Lien local</entry>
			<entry>Spoke92</entry>
			<entry><systemitem class='ipaddress'>fe80:1b2::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>435</entry>
			<entry>Point à point</entry>
			<entry>Spoke92</entry>
			<entry><systemitem class='ipaddress'>10.4.35.1:10.4.35.2</systemitem></entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke91</entry>
			<entry>Violet</entry>
			<entry>432</entry>
			<entry>Lien local</entry>
			<entry>Hub90</entry>
			<entry><systemitem class='ipaddress'>fe80:1b0::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>433</entry>
			<entry>Authentifiants</entry>
			<entry>Hub90</entry>
			<entry align='center'><systemitem>5p0k91 / Gr33n91</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>91</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.91.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:5b::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke92</entry>
			<entry>Violet</entry>
			<entry>434</entry>
			<entry>Lien local</entry>
			<entry>Hub90</entry>
			<entry><systemitem class='ipaddress'>fe80:1b2::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>435</entry>
			<entry>Authentifiants</entry>
			<entry>Hub90</entry>
			<entry align='center'><systemitem>5p0k92 / Gr33n92</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>92</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.92.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:5c::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='4' valign='middle'>Hub100</entry>
			<entry>Rouge</entry>
			<entry>-</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.9.10.129/26</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>2001:678:3fc:14f::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>436</entry>
			<entry>Lien local</entry>
			<entry>Spoke101</entry>
			<entry><systemitem class='ipaddress'>fe80:1b4::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>437</entry>
			<entry>Point à point</entry>
			<entry>Spoke101</entry>
			<entry><systemitem class='ipaddress'>10.4.37.1:10.4.37.2</systemitem></entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>438</entry>
			<entry>Lien local</entry>
			<entry>Spoke102</entry>
			<entry><systemitem class='ipaddress'>fe80:1b6::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>439</entry>
			<entry>Point à point</entry>
			<entry>Spoke102</entry>
			<entry><systemitem class='ipaddress'>10.4.39.1:10.4.39.2</systemitem></entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke101</entry>
			<entry>Violet</entry>
			<entry>436</entry>
			<entry>Lien local</entry>
			<entry>Hub100</entry>
			<entry><systemitem class='ipaddress'>fe80:1b4::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>437</entry>
			<entry>Authentifiants</entry>
			<entry>Hub100</entry>
			<entry align='center'><systemitem>5p0k101 / Gr33n101</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>101</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.101.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:65::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke102</entry>
			<entry>Violet</entry>
			<entry>438</entry>
			<entry>Lien local</entry>
			<entry>Hub100</entry>
			<entry><systemitem class='ipaddress'>fe80:1b6::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>439</entry>
			<entry>Authentifiants</entry>
			<entry>Hub100</entry>
			<entry align='center'><systemitem>5p0k102 / Gr33n102</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>102</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.102.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:66::1/64</systemitem>
			</entry>
		</row>
	</tbody>
	</tgroup>
	</table>

	<table xml:id='interco.pppoe.qa.hub-and-spoke.g2.addressing' frame='all' pgwide='1'>
		<title>Affectation des rôles, des numéros de VLANs, des adresses et des
		authentifiants - Groupe 2</title>
	<tgroup cols='7' align='left' colsep='1' rowsep='1'>
	<colspec colnum='1' colwidth='1*'/>
	<colspec colnum='2' colwidth='1*'/>
	<colspec colnum='3' colwidth='1*'/>
	<colspec colnum='4' colwidth='1*'/>
	<colspec colnum='5' colwidth='1.5*'/>
	<colspec colnum='6' colwidth='1*'/>
	<colspec colnum='7' colwidth='2*'/>
	<thead>
	<row>
		<?dbfo bgcolor="#333" ?>
		<?dbfo color="#fff" ?>
		<entry>Fédéraion de planètes</entry>
		<entry>Rôle</entry>
		<entry>VLAN</entry>
		<entry>Numéro</entry>
		<entry>Type</entry>
		<entry>Destination</entry>
		<entry>Adresse/Authentification</entry>
	</row>
	</thead>
	<tbody>
		<!-- Fédération 1 -->
		<row>
			<entry morerows='21' valign='middle'>
			Alderaan<?custom-linebreak?>
			Bespin<?custom-linebreak?>
			Centares
			</entry>
			<entry morerows='4' valign='middle'>Hub10</entry>
			<entry>Rouge</entry>
			<entry>-</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>172.19.9.65/26</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>2001:678:3fc:13b::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>400</entry>
			<entry>Lien local</entry>
			<entry>Spoke11</entry>
			<entry><systemitem class='ipaddress'>fe80:190::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>401</entry>
			<entry>Point à point</entry>
			<entry>Spoke11</entry>
			<entry><systemitem class='ipaddress'>10.4.1.1:10.4.1.2</systemitem></entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>402</entry>
			<entry>Lien local</entry>
			<entry>Spoke12</entry>
			<entry><systemitem class='ipaddress'>fe80:192::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>403</entry>
			<entry>Point à point</entry>
			<entry>Spoke12</entry>
			<entry><systemitem class='ipaddress'>10.4.3.1:10.4.3.2</systemitem></entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke11</entry>
			<entry>Violet</entry>
			<entry>400</entry>
			<entry>Lien local</entry>
			<entry>Hub10</entry>
			<entry><systemitem class='ipaddress'>fe80:190::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>401</entry>
			<entry>Authentifiants</entry>
			<entry>Hub10</entry>
			<entry align='center'><systemitem>5p0k11 / Gr33n11</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>11</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.11.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:b::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke12</entry>
			<entry>Violet</entry>
			<entry>402</entry>
			<entry>Lien local</entry>
			<entry>Hub10</entry>
			<entry><systemitem class='ipaddress'>fe80:192::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>403</entry>
			<entry>Authentifiants</entry>
			<entry>Hub10</entry>
			<entry align='center'><systemitem>5p0k12 / Gr33n12</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>12</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.12.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:c::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='4' valign='middle'>Hub20</entry>
			<entry>Rouge</entry>
			<entry>-</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>172.21.12.17/29</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>2001:678:3fc:14c::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>404</entry>
			<entry>Lien local</entry>
			<entry>Spoke21</entry>
			<entry><systemitem class='ipaddress'>fe80:194::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>405</entry>
			<entry>Point à point</entry>
			<entry>Spoke21</entry>
			<entry><systemitem class='ipaddress'>10.4.5.1:10.4.5.2</systemitem></entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>406</entry>
			<entry>Lien local</entry>
			<entry>Spoke22</entry>
			<entry><systemitem class='ipaddress'>fe80:196::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>407</entry>
			<entry>Point à point</entry>
			<entry>Spoke22</entry>
			<entry><systemitem class='ipaddress'>10.4.7.1:10.4.7.2</systemitem></entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke21</entry>
			<entry>Violet</entry>
			<entry>404</entry>
			<entry>Lien local</entry>
			<entry>Hub20</entry>
			<entry><systemitem class='ipaddress'>fe80:194::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>405</entry>
			<entry>Authentifiants</entry>
			<entry>Hub20</entry>
			<entry align='center'><systemitem>5p0k21 / Gr33n21</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>21</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.21.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:11::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke22</entry>
			<entry>Violet</entry>
			<entry>406</entry>
			<entry>Lien local</entry>
			<entry>Hub20</entry>
			<entry><systemitem class='ipaddress'>fe80:196::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>407</entry>
			<entry>Authentifiants</entry>
			<entry>Hub20</entry>
			<entry align='center'><systemitem>5p0k22 / Gr33n22</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>22</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.22.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:12::1/64</systemitem>
			</entry>
		</row>
		<!-- Fédération 2 -->
		<row>
			<entry morerows='21' valign='middle'>
			Coruscant<?custom-linebreak?>
			Dagobah<?custom-linebreak?>
			Endor
			</entry>
			<entry morerows='4' valign='middle'>Hub30</entry>
			<entry>Rouge</entry>
			<entry>-</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.0.10.33/27</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>2001:678:3fc:13c::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>408</entry>
			<entry>Lien local</entry>
			<entry>Spoke31</entry>
			<entry><systemitem class='ipaddress'>fe80:198::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>409</entry>
			<entry>Point à point</entry>
			<entry>Spoke31</entry>
			<entry><systemitem class='ipaddress'>10.4.9.1:10.4.9.2</systemitem></entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>410</entry>
			<entry>Lien local</entry>
			<entry>Spoke32</entry>
			<entry><systemitem class='ipaddress'>fe80:19a::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>411</entry>
			<entry>Point à point</entry>
			<entry>Spoke32</entry>
			<entry><systemitem class='ipaddress'>10.4.11.1:10.4.11.2</systemitem></entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke31</entry>
			<entry>Violet</entry>
			<entry>408</entry>
			<entry>Lien local</entry>
			<entry>Hub30</entry>
			<entry><systemitem class='ipaddress'>fe80:198::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>409</entry>
			<entry>Authentifiants</entry>
			<entry>Hub30</entry>
			<entry align='center'><systemitem>5p0k31 / Gr33n31</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>31</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.31.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:1f::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke32</entry>
			<entry>Violet</entry>
			<entry>410</entry>
			<entry>Lien local</entry>
			<entry>Hub30</entry>
			<entry><systemitem class='ipaddress'>fe80:19a::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>411</entry>
			<entry>Authentifiants</entry>
			<entry>Hub30</entry>
			<entry align='center'><systemitem>5p0k32 / Gr33n32</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>32</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.32.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:20::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='4' valign='middle'>Hub40</entry>
			<entry>Rouge</entry>
			<entry>-</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.8.11.9/29</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>2001:678:3fc:14b::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>412</entry>
			<entry>Lien local</entry>
			<entry>Spoke41</entry>
			<entry><systemitem class='ipaddress'>fe80:19c::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>413</entry>
			<entry>Point à point</entry>
			<entry>Spoke41</entry>
			<entry><systemitem class='ipaddress'>10.4.13.1:10.4.13.2</systemitem></entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>414</entry>
			<entry>Lien local</entry>
			<entry>Spoke42</entry>
			<entry><systemitem class='ipaddress'>fe80:19e::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>415</entry>
			<entry>Point à point</entry>
			<entry>Spoke42</entry>
			<entry><systemitem class='ipaddress'>10.4.15.1:10.4.15.2</systemitem></entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke41</entry>
			<entry>Violet</entry>
			<entry>412</entry>
			<entry>Lien local</entry>
			<entry>Hub40</entry>
			<entry><systemitem class='ipaddress'>fe80:19c::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>413</entry>
			<entry>Authentifiants</entry>
			<entry>Hub40</entry>
			<entry align='center'><systemitem>5p0k41 / Gr33n41</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>41</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.41.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:29::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke42</entry>
			<entry>Violet</entry>
			<entry>414</entry>
			<entry>Lien local</entry>
			<entry>Hub40</entry>
			<entry><systemitem class='ipaddress'>fe80:19e::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>415</entry>
			<entry>Authentifiants</entry>
			<entry>Hub40</entry>
			<entry align='center'><systemitem>5p0k42 / Gr33n42</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>42</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.42.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:2a::1/64</systemitem>
			</entry>
		</row>
		<!-- Fédération 3 -->
		<row>
			<entry morerows='21' valign='middle'>
			Felucia<?custom-linebreak?>
			Geonosis<?custom-linebreak?>
			Hoth
			</entry>
			<entry morerows='4' valign='middle'>Hub50</entry>
			<entry>Rouge</entry>
			<entry>-</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>192.168.12.17/29</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>2001:678:3fc:138::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>416</entry>
			<entry>Lien local</entry>
			<entry>Spoke51</entry>
			<entry><systemitem class='ipaddress'>fe80:1a0::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>417</entry>
			<entry>Point à point</entry>
			<entry>Spoke51</entry>
			<entry><systemitem class='ipaddress'>10.4.17.1:10.4.17.2</systemitem></entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>418</entry>
			<entry>Lien local</entry>
			<entry>Spoke52</entry>
			<entry><systemitem class='ipaddress'>fe80:1a2::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>419</entry>
			<entry>Point à point</entry>
			<entry>Spoke52</entry>
			<entry><systemitem class='ipaddress'>10.4.19.1:10.4.19.2</systemitem></entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke51</entry>
			<entry>Violet</entry>
			<entry>416</entry>
			<entry>Lien local</entry>
			<entry>Hub50</entry>
			<entry><systemitem class='ipaddress'>fe80:1a0::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>417</entry>
			<entry>Authentifiants</entry>
			<entry>Hub50</entry>
			<entry align='center'><systemitem>5p0k51 / Gr33n51</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>51</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.51.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:33::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke52</entry>
			<entry>Violet</entry>
			<entry>418</entry>
			<entry>Lien local</entry>
			<entry>Hub50</entry>
			<entry><systemitem class='ipaddress'>fe80:1a2::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>419</entry>
			<entry>Authentifiants</entry>
			<entry>Hub50</entry>
			<entry align='center'><systemitem>5p0k52 / Gr33n52</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>52</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.52.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:34::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='4' valign='middle'>Hub60</entry>
			<entry>Rouge</entry>
			<entry>-</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>192.168.10.81/28</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>2001:678:3fc:145::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>420</entry>
			<entry>Lien local</entry>
			<entry>Spoke61</entry>
			<entry><systemitem class='ipaddress'>fe80:1a4::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>421</entry>
			<entry>Point à point</entry>
			<entry>Spoke61</entry>
			<entry><systemitem class='ipaddress'>10.4.21.1:10.4.21.2</systemitem></entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>422</entry>
			<entry>Lien local</entry>
			<entry>Spoke62</entry>
			<entry><systemitem class='ipaddress'>fe80:1a6::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>423</entry>
			<entry>Point à point</entry>
			<entry>Spoke62</entry>
			<entry><systemitem class='ipaddress'>10.4.23.1:10.4.23.2</systemitem></entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke61</entry>
			<entry>Violet</entry>
			<entry>420</entry>
			<entry>Lien local</entry>
			<entry>Hub60</entry>
			<entry><systemitem class='ipaddress'>fe80:1a4::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>421</entry>
			<entry>Authentifiants</entry>
			<entry>Hub60</entry>
			<entry align='center'><systemitem>5p0k61 / Gr33n61</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>61</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.61.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:3d::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke62</entry>
			<entry>Violet</entry>
			<entry>422</entry>
			<entry>Lien local</entry>
			<entry>Hub60</entry>
			<entry><systemitem class='ipaddress'>fe80:1a6::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>423</entry>
			<entry>Authentifiants</entry>
			<entry>Hub60</entry>
			<entry align='center'><systemitem>5p0k62 / Gr33n62</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>62</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.62.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:3e::1/64</systemitem>
			</entry>
		</row>
		<!-- Fédération 4 -->
		<row>
			<entry morerows='21' valign='middle'>
			Jakku<?custom-linebreak?>
			Kamino<?custom-linebreak?>
			Mustafar
			</entry>
			<entry morerows='4' valign='middle'>Hub70</entry>
			<entry>Rouge</entry>
			<entry>-</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.31.1.145/28</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>2001:678:3fc:137::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>424</entry>
			<entry>Lien local</entry>
			<entry>Spoke71</entry>
			<entry><systemitem class='ipaddress'>fe80:1a8::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>425</entry>
			<entry>Point à point</entry>
			<entry>Spoke71</entry>
			<entry><systemitem class='ipaddress'>10.4.25.1:10.4.25.2</systemitem></entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>426</entry>
			<entry>Lien local</entry>
			<entry>Spoke72</entry>
			<entry><systemitem class='ipaddress'>fe80:1aa::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>427</entry>
			<entry>Point à point</entry>
			<entry>Spoke72</entry>
			<entry><systemitem class='ipaddress'>10.4.27.1:10.4.27.2</systemitem></entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke71</entry>
			<entry>Violet</entry>
			<entry>424</entry>
			<entry>Lien local</entry>
			<entry>Hub70</entry>
			<entry><systemitem class='ipaddress'>fe80:1a8::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>425</entry>
			<entry>Authentifiants</entry>
			<entry>Hub70</entry>
			<entry align='center'><systemitem>5p0k71 / Gr33n71</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>71</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.71.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:47::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke72</entry>
			<entry>Violet</entry>
			<entry>426</entry>
			<entry>Lien local</entry>
			<entry>Hub70</entry>
			<entry><systemitem class='ipaddress'>fe80:1aa::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>427</entry>
			<entry>Authentifiants</entry>
			<entry>Hub50</entry>
			<entry align='center'><systemitem>5p0k72 / Gr33n72</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>72</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.72.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:48::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='4' valign='middle'>Hub80</entry>
			<entry>Rouge</entry>
			<entry>-</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.9.15.17/29</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>2001:678:3fc:150::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>428</entry>
			<entry>Lien local</entry>
			<entry>Spoke81</entry>
			<entry><systemitem class='ipaddress'>fe80:1ac::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>429</entry>
			<entry>Point à point</entry>
			<entry>Spoke81</entry>
			<entry><systemitem class='ipaddress'>10.4.29.1:10.4.29.2</systemitem></entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>430</entry>
			<entry>Lien local</entry>
			<entry>Spoke82</entry>
			<entry><systemitem class='ipaddress'>fe80:1ae::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>431</entry>
			<entry>Point à point</entry>
			<entry>Spoke82</entry>
			<entry><systemitem class='ipaddress'>10.4.31.1:10.4.31.2</systemitem></entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke81</entry>
			<entry>Violet</entry>
			<entry>428</entry>
			<entry>Lien local</entry>
			<entry>Hub80</entry>
			<entry><systemitem class='ipaddress'>fe80:1ac::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>429</entry>
			<entry>Authentifiants</entry>
			<entry>Hub80</entry>
			<entry align='center'><systemitem>5p0k81 / Gr33n81</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>81</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.81.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:51::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke82</entry>
			<entry>Violet</entry>
			<entry>430</entry>
			<entry>Lien local</entry>
			<entry>Hub80</entry>
			<entry><systemitem class='ipaddress'>fe80:1ae::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>431</entry>
			<entry>Authentifiants</entry>
			<entry>Hub80</entry>
			<entry align='center'><systemitem>5p0k82 / Gr33n82</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>82</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.82.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:52::1/64</systemitem>
			</entry>
		</row>
		<!-- Fédération 5 -->
		<row>
			<entry morerows='21' valign='middle'>
			Naboo<?custom-linebreak?>
			Tatooine<?custom-linebreak?>
			Tython
			</entry>
			<entry morerows='4' valign='middle'>Hub90</entry>
			<entry>Rouge</entry>
			<entry>-</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.30.6.65/28</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>2001:678:3fc:132::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>432</entry>
			<entry>Lien local</entry>
			<entry>Spoke91</entry>
			<entry><systemitem class='ipaddress'>fe80:1b0::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>433</entry>
			<entry>Point à point</entry>
			<entry>Spoke91</entry>
			<entry><systemitem class='ipaddress'>10.4.33.1:10.4.33.2</systemitem></entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>434</entry>
			<entry>Lien local</entry>
			<entry>Spoke92</entry>
			<entry><systemitem class='ipaddress'>fe80:1b2::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>435</entry>
			<entry>Point à point</entry>
			<entry>Spoke92</entry>
			<entry><systemitem class='ipaddress'>10.4.35.1:10.4.35.2</systemitem></entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke91</entry>
			<entry>Violet</entry>
			<entry>432</entry>
			<entry>Lien local</entry>
			<entry>Hub90</entry>
			<entry><systemitem class='ipaddress'>fe80:1b0::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>433</entry>
			<entry>Authentifiants</entry>
			<entry>Hub90</entry>
			<entry align='center'><systemitem>5p0k91 / Gr33n91</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>91</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.91.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:5b::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke92</entry>
			<entry>Violet</entry>
			<entry>434</entry>
			<entry>Lien local</entry>
			<entry>Hub90</entry>
			<entry><systemitem class='ipaddress'>fe80:1b2::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>435</entry>
			<entry>Authentifiants</entry>
			<entry>Hub90</entry>
			<entry align='center'><systemitem>5p0k92 / Gr33n92</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>92</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.92.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:5c::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='4' valign='middle'>Hub100</entry>
			<entry>Rouge</entry>
			<entry>-</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.9.10.129/26</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>2001:678:3fc:14f::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>436</entry>
			<entry>Lien local</entry>
			<entry>Spoke101</entry>
			<entry><systemitem class='ipaddress'>fe80:1b4::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>437</entry>
			<entry>Point à point</entry>
			<entry>Spoke101</entry>
			<entry><systemitem class='ipaddress'>10.4.37.1:10.4.37.2</systemitem></entry>
		</row>
		<row>
			<entry>Violet</entry>
			<entry>438</entry>
			<entry>Lien local</entry>
			<entry>Spoke102</entry>
			<entry><systemitem class='ipaddress'>fe80:1b6::1/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>439</entry>
			<entry>Point à point</entry>
			<entry>Spoke102</entry>
			<entry><systemitem class='ipaddress'>10.4.39.1:10.4.39.2</systemitem></entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke101</entry>
			<entry>Violet</entry>
			<entry>436</entry>
			<entry>Lien local</entry>
			<entry>Hub100</entry>
			<entry><systemitem class='ipaddress'>fe80:1b4::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>437</entry>
			<entry>Authentifiants</entry>
			<entry>Hub100</entry>
			<entry align='center'><systemitem>5p0k101 / Gr33n101</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>101</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.101.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:65::1/64</systemitem>
			</entry>
		</row>
		<row>
			<entry morerows='2' valign='middle'>Spoke102</entry>
			<entry>Violet</entry>
			<entry>438</entry>
			<entry>Lien local</entry>
			<entry>Hub100</entry>
			<entry><systemitem class='ipaddress'>fe80:1b6::2/64</systemitem></entry>
		</row>
		<row>
			<entry>Orange</entry>
			<entry>439</entry>
			<entry>Authentifiants</entry>
			<entry>Hub100</entry>
			<entry align='center'><systemitem>5p0k102 / Gr33n102</systemitem></entry>
		</row>
		<row>
			<entry>Vert</entry>
			<entry>102</entry>
			<entry>Passerelle</entry>
			<entry>-</entry>
			<entry>
				<systemitem class='ipaddress'>10.27.102.1/24</systemitem><?custom-linebreak?>
				<systemitem class='ipaddress'>fda0:7a62:66::1/64</systemitem>
			</entry>
		</row>
	</tbody>
	</tgroup>
	</table>
</sect1>

<sect1 xml:id='interco.pppoe.qa.hub'>
	<title>Configuration PPPoE d'un routeur Hub</title>

	<para>Le rôle du routeur <wordasword>Hub</wordasword>, tel qu'il été défini
	dans la section précédente, est d'interconnecter un réseau local
	(<acronym>LAN</acronym>) qui donne accès à l'Internet et plusieurs réseaux
	étendus (<acronym>WAN</acronym>) d'extrémité. Dans le contexte de ces
	travaux pratiques, le routeur <wordasword>Hub</wordasword> assure aussi la
	fonction <wordasword>Broadband Remote Access Server</wordasword>
	(<acronym>BRAS</acronym>). C'est la raison pour laquelle il détient les
	adresses <acronym>IPv4</acronym> et <acronym>IPv6</acronym> à attribuer aux
	routeurs <wordasword>Spoke</wordasword>.</para>

	<para>Ce routeur doit aussi gérer l'encapsulation des trames
	<acronym>PPP</acronym> dans Ethernet.</para>

<sect2 xml:id='interco.pppoe.qa.hub.wan'>
	<title>Côté réseaux étendus - <acronym>WAN</acronym></title>

	<para>Le protocole <acronym>PPP</acronym> n'a pas été conçu suivant le
	modèle Client/Serveur. Il suppose que deux processus pairs échangent des
	informations. Dans les questions qui suivent, le routeur
	<wordasword>Hub</wordasword> doit exiger que le routeur
	<wordasword>Spoke</wordasword> s'authentifie auprès de lui avant de
	délivrer les adresses de couche réseau.</para>

	<qandaset defaultlabel='number'>
	<qandaentry>
	<question>
		<para><phrase>Quel paquet spécifique à la gestion du dialogue
		<acronym>PPPoE</acronym> à installer sur le routeur
		<wordasword>Hub</wordasword>&nbsp;?</phrase></para>

		<para>Rechercher dans le catalogue des paquets, la référence
		<acronym>pppoe</acronym>.</para>
	</question>
	<answer>
<screen><prompt>$</prompt> aptitude search pppoe
i   <emphasis>pppoe</emphasis>     - Pilote PPP sur Ethernet
p   pppoeconf - configures PPPoE/ADSL connections</screen>

		<para>Le résultat de la commande <command>aptitude show pppoe</command>
		montre que c'est bien ce paquet qui répond au besoin.</para>
	</answer>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Quel est le rôle de l'outil contenu dans le paquet
		demandé à la question précédente relativement au démon
		<command>pppd</command> fourni avec le paquet
		<application>ppp</application>&nbsp;?</phrase></para>

		<para>Rechercher dans les pages de manuels de l'outil demandé à la
		question précédente.</para>
	</question>
	<answer>
		<para>L'outil <command>pppoe-server</command> gère directement
		l'encapsulation des trames <acronym>PPP</acronym> dans les trames
		Ethernet. Il communique ensuite les paramètres utiles au démon
		<application>pppd</application> qui fonctionne de façon totalement
		transparente vis-à-vis de la technologie du réseau sous-jacent.</para>
	</answer>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Quels sont les noms des deux sous-couches du protocole
		<acronym>PPP</acronym> qui apparaissent dans les journaux
		systèmes&nbsp;?</phrase> Quels sont les rôles respectifs de ces deux
		sous-couches&nbsp;?</para>

		<para>Consulter la page &url.ppp-wikipedia;.</para>
	</question>
	<answer>
		<para>La consultation des journaux système lors du dialogue
		<acronym>PPP</acronym> fait apparaître des informations du type
		suivant.</para>

<screen>pppd[3262]: sent [LCP ConfReq id=0x1 &lt;mru 1492> &lt;magic 0x46010ac>]
kernel: [  895.700115] NET: Registered protocol family 24
pppd[3262]: rcvd [LCP ConfReq id=0x1 &lt;magic 0xcab9fecc>] <co xml:id='lcp'/>
pppd[3262]: sent [LCP ConfAck id=0x1 &lt;magic 0xcab9fecc>]
pppd[3262]: sent [LCP ConfReq id=0x1 &lt;mru 1492> &lt;magic 0x46010ac>]
pppd[3262]: rcvd [LCP ConfAck id=0x1 &lt;mru 1492> &lt;magic 0x46010ac>]
pppd[3262]: sent [LCP EchoReq id=0x0 magic=0x46010ac]
pppd[3262]: peer from calling number 52:54:00:12:34:05 authorized
pppd[3262]: sent [IPCP ConfReq id=0x1 &lt;addr 0.0.0.0>] <co xml:id='ncp'/>
pppd[3262]: rcvd [LCP EchoReq id=0x0 magic=0xcab9fecc]
pppd[3262]: sent [LCP EchoRep id=0x0 magic=0x46010ac]
pppd[3262]: rcvd [IPCP ConfReq id=0x1 &lt;addr 10.0.0.1>]
pppd[3262]: sent [IPCP ConfAck id=0x1 &lt;addr 10.0.0.1>]
pppd[3262]: rcvd [LCP EchoRep id=0x0 magic=0xcab9fecc]
pppd[3262]: rcvd [IPCP ConfNak id=0x1 &lt;addr 10.67.15.1>]
pppd[3262]: sent [IPCP ConfReq id=0x2 &lt;addr 10.67.15.1>]
pppd[3262]: rcvd [IPCP ConfAck id=0x2 &lt;addr 10.67.15.1>]
pppd[3262]: local  IP address 10.67.15.1
pppd[3262]: remote IP address 10.0.0.1</screen>

		<calloutlist>
		<callout arearefs='lcp'>
		<para>La sous-couche <wordasword>Link Control Protocol</wordasword>
		(<acronym>LCP</acronym>) assure la configuration automatique des
		interfaces à chaque extrémité. Les paramètres négociés entre les deux
		hôtes en communication sont multiples&nbsp;: l'adaptation de la taille de
		datagramme, les caractères d'échappement, les numéros magiques et la
		sélection des options d'authentification.</para>
		</callout>
		<callout arearefs='ncp'>
		<para>La sous-couche <wordasword>Network Control Protocol</wordasword>
		(<acronym>NCP</acronym>) assure l'encapsulation de multiples protocoles
		de la couche réseau. Dans l'exemple donné, c'est le protocole
		<acronym>IPv4</acronym> qui est utilisé ; d'où l'acronyme
		<acronym>IPCP</acronym>.</para>
		</callout>
		</calloutlist>
	</answer>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Quels sont les en-têtes du dialogue qui identifient les
		requêtes (émises|reçues), les rejets et les
		acquittements&nbsp;?</phrase></para>

		<para>Consulter les journaux système contenant les traces d'une
		connexion <acronym>PPP</acronym>.</para>
	</question>
	<answer>
		<para>La copie d'écran donnée ci-dessus fait apparaître les directives
		<literal>Conf*</literal> pour chaque paramètre négocié.</para>
		<itemizedlist>
		<listitem>
			<para><literal>ConfReq</literal> indique une requête.</para>
		</listitem>
		<listitem>
			<para><literal>ConfAck</literal> indique un acquittement.</para>
		</listitem>
		<listitem>
			<para><literal>ConfNak</literal> indique un rejet.</para>
		</listitem>
		</itemizedlist>
	</answer>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Dans quel fichier sont stockés les paramètres d'identité
		et d'authentification utilisés par le protocole
		<acronym>CHAP</acronym>&nbsp;?</phrase></para>

		<para>Consulter les pages de manuels du démon <command>pppd</command> à
		la section <citetitle>AUTHENTICATION</citetitle>.</para>
	</question>
	<answer>
		<para>C'est le fichier <filename>/etc/ppp/chap-secrets</filename> qui
		contient les couples <wordasword>login/password</wordasword> utilisés
		lors de l'authentification.</para>

		<para>Voici un exmple du contenu de ce fichier.</para>

<screen># Secrets for authentication using CHAP
# client        server  secret                  IP addresses
"spoke1"        *       "5p0k3-1-53cr3t"        *
"spoke2"        *       "5p0k3-2-53cr3t"        *</screen>
	</answer>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Dans quel fichier sont stockés les paramètres passés au
		démon <command>pppd</command> lors du lancement du serveur
		<acronym>PPPoE</acronym>&nbsp;?</phrase></para>

		<para>Consulter les pages de manuels de l'outil
		<command>pppoe-server</command>.</para>
	</question>
	<answer>
		<para>C'est le fichier
		<filename>/etc/ppp/pppoe-server-options</filename> qui contient la
		liste des paramètres utilisés lors du dialogue
		<acronym>PPP</acronym>.</para>
	</answer>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Quelles sont les options du protocole
		<acronym>PPP</acronym> qui doivent être implantées dans le fichier
		demandé à la question précédente&nbsp;?</phrase></para>

		<para>Consulter les pages de manuels du démon <command>pppd</command>
		et rechercher les paramètres correspondant à la liste suivante.</para>

		<itemizedlist>
		<listitem>
			<para>Afficher en détail toutes les étapes d'établissement de
			session dans les journaux système.</para>
		</listitem>
		<listitem>
			<para>Référencer l'identifiant du compte utilisateur à utiliser
			lors de l'authentification du routeur
			<wordasword>Spoke</wordasword>. Cette option implique que le compte
			utilisateur existe sur le système et qu'il soit présent dans le
			fichier <filename>/etc/ppp/chap-secrets</filename>.</para>
		</listitem>
		<listitem>
			<para>Imposer au routeur <wordasword>Spoke</wordasword> une
			authentification via le protocole <acronym>CHAP</acronym>
			(<wordasword>Challenge Handshake Authentication
			Protocol</wordasword>).</para>
		</listitem>
		<listitem>
			<para>Préserver la route par défaut, et donc l'accès Internet, du
			routeur <wordasword>Hub</wordasword>.</para>
		</listitem>
		<listitem>
			<para>Publier l'adresse <acronym>IP</acronym> du serveur
			<acronym>DNS</acronym> à utiliser pour la résolution des noms de
			domaines.</para>
		</listitem>
		<listitem>
			<para>Activer l'utilisation des protocoles
			<acronym>IPv6CP</acronym> et <acronym>IPv6</acronym>.</para>
		</listitem>
		</itemizedlist>
	</question>
	<answer>
		<para>Voici une copie du fichier
		<filename>/etc/ppp/pppoe-server-options</filename> qui contient la
		liste des paramètres demandés.</para>

<screen>debug
login
require-chap
nodefaultroute
ms-dns 172.16.16.2
+ipv6</screen>
	</answer>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Comment créer les comptes utilisateurs locaux sur le
		routeur <wordasword>Hub</wordasword> sachant qu'ils ne sont autorisés
		ni à se connecter ni à avoir un répertoire
		personnel&nbsp;?</phrase></para> 

		<para>Consulter les options de la commande <command>adduser</command>.</para>
	</question>
	<answer>
		<para>Voici un exemple de commande <command>adduser</command>.</para>

<screen><prompt>#</prompt> adduser --disabled-login --no-create-home spoke1</screen>
	</answer>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Quels sont les paramètres à donner au lancement de
		l'outil <command>pppoe-server</command> pour qu'il délivre les adresses
		aux routeurs <wordasword>Spoke</wordasword> après authentification de
		ceux-ci&nbsp;?</phrase></para>

		<para>Consulter les options de la commande
		<command>pppoe-server</command>.</para>
	</question>
	<answer>
		<para>Voici un exemple de commande
		<command>pppoe-server</command>.</para>

<screen><prompt>#</prompt> pppoe-server -I eth0.26 -C BRAS -L 192.168.1.29 -R 192.168.1.30</screen>
	</answer>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Quels sont les résultats obtenus une fois que la session
		<acronym>PPP</acronym> est établie et que les adresses de couche réseau
		ont été délivrées&nbsp;?</phrase></para>

		<para>Consulter les journaux système, la liste des procsessus, l'état
		des interfaces réseau et de la table de routage.</para>

		<para>Attention ! Les résultats ne sont pertinents que si le dialogue
		avec un routeur <wordasword>Spoke</wordasword> est effectif.</para>
	</question>
	<answer>
		<itemizedlist>
		<listitem>
			<para>Consultation des journaux système.</para>

<screen>pppoe-server[7]: Session 1 created for client e6:92:9d:7a:9a:98 (192.168.1.30) on eth0.26 using Service-Name ''
pppd[7]: pppd 2.4.7 started by etu, uid 0
pppd[7]: using channel 2
pppd[7]: Using interface ppp0
pppd[7]: Connect: ppp0 &lt;--> /dev/pts/1
pppd[7]: sent [LCP ConfReq id=0x1 &lt;mru 1492> &lt;auth chap MD5> &lt;magic 0x7da53eb6>]
pppd[7]: rcvd [LCP ConfAck id=0x1 &lt;mru 1492> &lt;auth chap MD5> &lt;magic 0x7da53eb6>]
pppd[7]: rcvd [LCP ConfReq id=0x1 &lt;mru 1492> &lt;magic 0xeea2b21a>]
pppd[7]: sent [LCP ConfAck id=0x1 &lt;mru 1492> &lt;magic 0xeea2b21a>]
pppd[7]: sent [LCP EchoReq id=0x0 magic=0x7da53eb6]
pppd[7]: sent [CHAP Challenge id=0xdf &lt;a67ec17d7f16afda88af52b81a1357b506b2260d7f754e>, name = "corellia"]
pppd[7]: rcvd [LCP EchoReq id=0x0 magic=0xeea2b21a]
pppd[7]: sent [LCP EchoRep id=0x0 magic=0x7da53eb6]
pppd[7]: rcvd [LCP EchoRep id=0x0 magic=0xeea2b21a]
pppd[7]: rcvd [CHAP Response id=0xdf &lt;8d36d92d4559ee32aec3383bd725eb4f>, name = "spoke1"]
pppd[7]: sent [CHAP Success id=0xdf "Access granted"]
pppd[7]: Initializing PAM (2) for user spoke1
pppd[7]: ---> PAM INIT Result = 0
pppd[7]: Attempting PAM account checks
pppd[7]: PAM Account OK for spoke1
pppd[7]: PAM Session opened for user spoke1
pppd[7]: user spoke1 logged in on tty  intf ppp0
pppd[7]: local  LL address fe80::85c9:885e:3a4e:02ad
pppd[7]: remote LL address fe80::399d:24c8:9deb:a7b7
pppd[7]: local  IP address 192.168.1.29
pppd[7]: remote IP address 192.168.1.30</screen>
		</listitem>

		<listitem>
			<para>Liste des processus.</para>

<screen>pppoe-server -I eth0.26 -C BRAS -L 192.168.1.29 -R 192.168.1.30
	\_ pppd pty /usr/sbin/pppoe -n -I eth0.26 -e 1:e6:92:9d:7a:9a:98 -S '' 
		file /etc/ppp/pppoe-server-options 192.168.1.29:192.168.1.30 
		nodetach noaccomp nopcomp default-asyncmap mru 1492 mtu 1492
		\_ /usr/sbin/pppoe -n -I eth0.26 -e 1:e6:92:9d:7a:9a:98 -S</screen>
		</listitem>

		<listitem>
			<para>État des interfaces.</para>

<screen><prompt>$</prompt> ip addr ls dev eth0.26
5: eth0.26@eth0: &lt;BROADCAST,MULTICAST,<emphasis>UP,LOWER_UP</emphasis>> mtu 1500 \
			qdisc noqueue state <emphasis>UP</emphasis> group default qlen 1000
    link/ether b8:ca:3a:9e:85:56 brd ff:ff:ff:ff:ff:ff
    inet6 fe80::baca:3aff:fe9e:8556/64 scope link
       valid_lft forever preferred_lft forever

<prompt>$</prompt> ip addr ls dev ppp0
9: ppp0: &lt;POINTOPOINT,MULTICAST,NOARP,<emphasis>UP,LOWER_UP</emphasis>> <emphasis>mtu 1492</emphasis> \
			qdisc pfifo_fast state UNKNOWN group default qlen 3
    link/ppp
    inet 192.168.1.29 peer 192.168.1.30/32 scope global ppp0
       valid_lft forever preferred_lft forever
    inet6 fe80::8478:a29b:3836:8f96/10 scope link
       valid_lft forever preferred_lft forever</screen>
		</listitem>

		<listitem>
			<para>Table de routage.</para>

<screen><prompt>$</prompt> ip route ls dev ppp0
192.168.1.30 proto kernel scope link src 192.168.1.29</screen>
		</listitem>
		</itemizedlist>
	</answer>
	</qandaentry>
	</qandaset>
</sect2>

<sect2 xml:id='interco.pppoe.qa.hub.lan'>
	<title>Côté réseau local - <acronym>LAN</acronym></title>

	<para>Le routeur <wordasword>Hub</wordasword> doit interconnecter les
	routeurs <wordasword>Spoke</wordasword> entre eux et donner accès à
	l'Internet via son interface réseau active sur le <acronym>VLAN</acronym>
	dédié à cet usage.</para>

	<qandaset defaultlabel='number'>
	<qandaentry>
	<question>
		<para><phrase>Comment créer et configurer une sous-interface dédiée au
		<acronym>VLAN</acronym> Internet (numéro 4)&nbsp;?</phrase></para>

		<para>Consulter l'&url.cheatsheet; ou les pages de manuels <command>man
		ip-link</command> et rechercher les options du type
		<option>vlan</option>.</para>
	</question>
	<answer>
		<para>Voici les différentes instructions.</para>

<screen><prompt>$</prompt> sudo ip link add link eth0 name eth0.4 type vlan id 4

<prompt>$</prompt> sudo ip link set dev eth0.4 up

<prompt>$</prompt> sudo ip addr add 172.16.16.59/20 brd + dev eth0.4

<prompt>$</prompt> sudo ip -6 addr add 2001:678:3fc:4::3b/64 dev eth0.4</screen>
	</answer>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Comment valider les communciations dans le
		<acronym>VLAN</acronym> Internet (numéro 4)&nbsp;?</phrase></para>

		<para>L'hôte voisin le plus intéressant dans le <acronym>VLAN</acronym>
		Internet est le routeur. On vérifie à l'aide de requêtes
		<acronym>ICMP</acronym> que l'on peut le contacter.</para>
	</question>
	<answer>
		<para>Voici un exemple de résultats.</para>

<screen><prompt>$</prompt> ping -qc2 172.16.16.2
PING 172.16.16.2 (172.16.16.2) 56(84) bytes of data.

--- 172.16.16.2 ping statistics ---
2 packets transmitted, 2 received, <emphasis>0% packet loss</emphasis>, time 13ms
rtt min/avg/max/mdev = 0.634/0.643/0.653/0.027 ms

<prompt>$</prompt> ping -qc2 2001:678:3fc:4::2
PING 2001:678:3fc:4::2(2001:678:3fc:4::2) 56 data bytes

--- 2001:678:3fc:4::2 ping statistics ---
2 packets transmitted, 2 received, <emphasis>0% packet loss</emphasis>, time 28ms
rtt min/avg/max/mdev = 0.628/0.634/0.640/0.006 ms</screen>
	</answer>
	</qandaentry>
	</qandaset>
</sect2>
</sect1>

<?custom-pagebreak?>
<sect1 xml:id='interco.pppoe.qa.spoke'>
	<title>Configuration PPPoE d'un routeur Spoke</title>

	<para>Dans le scénario défini dans la <xref
	linkend='interco.pppoe.qa.hub-and-spoke'/>, ce routeur ne peut accéder aux
	autres réseaux que par le routeur <wordasword>Hub</wordasword>. Son
	interface <acronym>WAN</acronym> joue donc le rôle de route par défaut pour
	le réseau local <wordasword>Branch</wordasword>. Ce genre de routeur est
	aussi appelé routeur d'extrémité.</para>

<sect2 xml:id='interco.pppoe.qa.spoke.wan'>
	<title>Côté réseau étendu - WAN</title>

	<para>Cette partie vient en vis-à-vis de la <xref
	linkend='interco.pppoe.qa.hub.wan'/> d'un routeur
	<wordasword>Hub</wordasword>. Le routeur <wordasword>Spoke</wordasword>
	utilise lui aussi un démon <application>pppd</application> sur le
	<acronym>VLAN</acronym> <option>Data</option> pour établir une session
	<acronym>PPP</acronym> avec le routeur <wordasword>Hub</wordasword>. À la
	différence de ce dernier, il n'est pas à l'initiative du dialogue
	<acronym>PPPoE</acronym> mais il doit être capable de gérer l'encapsulation
	des trames <acronym>PPP</acronym> sur un réseau local Ethernet.</para>

	<qandaset defaultlabel='number'>
	<qandaentry>
	<question>
		<para><phrase>Comment utiliser l'encapsulation des trames
		<acronym>PPP</acronym> dans Ethernet à partir du démon
		<command>pppd</command> fourni avec le paquet
		<application>ppp</application>&nbsp;?</phrase></para>

		<para>Rechercher dans le répertoire de documentation du paquet
		<application>ppp</application>.</para>
	</question>
	<answer>
		<para>Dans le répertoire <filename
		class='directory'>/usr/share/doc/ppp/</filename>, on trouve le fichier
		<filename>README.pppoe</filename> qui indique que l'appel au module
		<filename>rp-pppoe.so</filename> permet d'encapsuler des trames
		<acronym>PPP</acronym> sur un réseau local Ethernet.</para>

		<para>Toujours à partir du même répertoire, on trouve dans la liste des
		fichiers d'exemples de configuration un modèle adapté à notre contexte
		:&nbsp;<filename>peers-pppoe</filename>.</para>
	</answer>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Dans quel fichier sont stockés les paramètres d'identité
		et d'authentification utilisés par le protocole
		<acronym>CHAP</acronym>&nbsp;?</phrase></para>

		<para>Consulter les pages de manuels du démon <command>pppd</command> à
		la section <citetitle>AUTHENTICATION</citetitle>.</para>
	</question>
	<answer>
		<para>C'est le fichier <filename>/etc/ppp/chap-secrets</filename> qui
		contient les couples <wordasword>login/password</wordasword> utilisés
		lors de l'authentification.</para>

		<para>Voici un exemple du contenu de ce fichier. Le nom du client ainsi
		que son mot de passe secret doivent être identiques à chaque extrémité
		de la session <acronym>PPP</acronym>.</para>

<screen># Secrets for authentication using CHAP
# client        server  secret                  IP addresses
"spoke1"        *       "5p0k3-1-53cr3t"        *</screen>
	</answer>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Quelles sont les options de configuration du démon
		<command>pppd</command> à placer dans le fichier
		<filename>/etc/ppp/peers/pppoe-provider</filename> pour assurer
		l'établissement de la session <acronym>PPP</acronym> entre les
		routeurs&nbsp;?</phrase></para>

		<para>Utiliser le fichier exemple <acronym>PPPoE</acronym> fourni avec
		la documentation du paquet <application>ppp</application>.</para>
	</question>
	<answer>
		<para>Voici une copie du fichier
		<filename>/etc/ppp/peers/pppoe-provider</filename> avec les options
		correspondant au contexte d'un routeur
		<wordasword>Spoke</wordasword>.</para>

<screen># There should be a matching entry with the password in /etc/ppp/chap-secrets.
user "spoke1"

# Load the PPPoE plugin.
plugin rp-pppoe.so

# Ethernet interface to which the modem is connected.
vlan26

# Assumes that your IP address is allocated dynamically by the ISP.
noipdefault
# Try to get the name server addresses from the ISP.
usepeerdns
# Use this connection as the default route.
defaultroute

# Makes pppd "dial again" when the connection is lost.
persist

# Do not ask the remote to authenticate.
noauth

debug
+ipv6</screen>
	</answer>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Comment lancer le démon <command>pppd</command> pour
		qu'il prenne en compte les paramètres définis dans le fichier complété
		à la question précédente&nbsp;?</phrase></para>

		<para>Consulter les pages de manuels du démon
		<command>pppd</command>.</para>
	</question>
	<answer>
		<para>C'est l'option <option>file</option> qui permet de désigner le
		fichier de configuration à utiliser. Voici une copie d'écran du
		lancement de <command>pppd</command>.</para>

<screen><prompt>#</prompt> pppd file /etc/ppp/peers/pppoe-provider</screen>
	</answer>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Quels sont les noms des deux sous-couches du protocole
		<acronym>PPP</acronym> qui apparaissent dans les journaux
		systèmes&nbsp;?</phrase> Quels sont les rôles respectifs de ces deux
		sous-couches&nbsp;?</para>

		<para>Consulter la page &url.ppp-wikipedia;.</para>
	</question>
	<answer>
		<para>La consultation des journaux système lors du dialogue
		<acronym>PPP</acronym> fait apparaître des informations
		suivantes.</para>

<screen>pppd[18]:  dst e6:92:9d:7a:9a:98  src b8:ca:3a:9e:85:56
pppd[18]:  [service-name]
pppd[18]: PADS: Service-Name: ''
pppd[18]: PPP session is 3
pppd[18]: Connected to b8:ca:3a:9e:85:56 via interface vlan26
pppd[18]: using channel 40
pppd[18]: Using interface ppp0
pppd[18]: Connect: ppp0 &lt;--> vlan26
pppd[18]: sent [LCP ConfReq id=0x1 &lt;mru 1492> &lt;magic 0xd9acc3c9>]
pppd[18]: rcvd [LCP ConfReq id=0x1 &lt;mru 1492> &lt;auth chap MD5> &lt;magic 0xf7fb217b>]
pppd[18]: sent [LCP ConfAck id=0x1 &lt;mru 1492> &lt;auth chap MD5> &lt;magic 0xf7fb217b>]
pppd[18]: sent [LCP ConfReq id=0x1 &lt;mru 1492> &lt;magic 0xd9acc3c9>]
pppd[18]: rcvd [LCP ConfAck id=0x1 &lt;mru 1492> &lt;magic 0xd9acc3c9>]
pppd[18]: sent [LCP EchoReq id=0x0 magic=0xd9acc3c9]
pppd[18]: rcvd [LCP EchoReq id=0x0 magic=0xf7fb217b]
pppd[18]: sent [LCP EchoRep id=0x0 magic=0xd9acc3c9]
pppd[18]: rcvd [CHAP Challenge id=0x3 &lt;330acf7fa955f3bf549595f45a700c00fe8b7bf934198b>, name = "corellia"]
pppd[18]: sent [CHAP Response id=0x3 &lt;4b3c887e7581087b5d97718f91d1a372>, name = "spoke1"]
pppd[18]: rcvd [LCP EchoRep id=0x0 magic=0xf7fb217b]
pppd[18]: rcvd [CHAP Success id=0x3 "Access granted"]
pppd[18]: CHAP authentication succeeded: Access granted
pppd[18]: <emphasis>CHAP authentication succeeded</emphasis>
pppd[18]: peer from calling number B8:CA:3A:9E:85:56 authorized
pppd[18]: sent [IPCP ConfReq id=0x1 &lt;addr 0.0.0.0> &lt;ms-dns1 0.0.0.0> &lt;ms-dns2 0.0.0.0>]
pppd[18]: sent [IPV6CP ConfReq id=0x1 &lt;addr fe80::bc5e:a5f6:6402:1a31>]
pppd[18]: rcvd [CCP ConfReq id=0x1 &lt;deflate 15> &lt;deflate(old#) 15> &lt;bsd v1 15>]
pppd[18]: sent [CCP ConfReq id=0x1]
pppd[18]: sent [CCP ConfRej id=0x1 &lt;deflate 15> &lt;deflate(old#) 15> &lt;bsd v1 15>]
pppd[18]: rcvd [IPCP ConfReq id=0x1 &lt;compress VJ 0f 01> &lt;addr 192.168.1.29>]
pppd[18]: sent [IPCP ConfRej id=0x1 &lt;compress VJ 0f 01>]
pppd[18]: rcvd [IPV6CP ConfReq id=0x1 &lt;addr fe80::34a0:f09f:e323:94be>]
pppd[18]: sent [IPV6CP ConfAck id=0x1 &lt;addr fe80::34a0:f09f:e323:94be>]
pppd[18]: rcvd [IPCP ConfNak id=0x1 &lt;addr 192.168.1.30> &lt;ms-dns1 172.16.16.2> &lt;ms-dns2 172.16.16.2>]
pppd[18]: sent [IPCP ConfReq id=0x2 &lt;addr 192.168.1.30> &lt;ms-dns1 172.16.16.2> &lt;ms-dns2 172.16.16.2>]
pppd[18]: rcvd [IPV6CP ConfAck id=0x1 &lt;addr fe80::bc5e:a5f6:6402:1a31>]
pppd[18]: local  LL address fe80::bc5e:a5f6:6402:1a31
pppd[18]: remote LL address fe80::34a0:f09f:e323:94be
pppd[18]: Script /etc/ppp/ipv6-up started (pid 18817)
pppd[18]: rcvd [CCP ConfAck id=0x1]
pppd[18]: rcvd [CCP ConfReq id=0x2]
pppd[18]: sent [CCP ConfAck id=0x2]
pppd[18]: rcvd [IPCP ConfReq id=0x2 &lt;addr 192.168.1.29>]
pppd[18]: sent [IPCP ConfAck id=0x2 &lt;addr 192.168.1.29>]
pppd[18]: rcvd [IPCP ConfAck id=0x2 &lt;addr 192.168.1.30> &lt;ms-dns1 172.16.16.2> &lt;ms-dns2 172.16.16.2>]
pppd[18]: local  IP address 192.168.1.30
pppd[18]: remote IP address 192.168.1.29
pppd[18]: primary   DNS address 172.16.16.2
pppd[18]: secondary DNS address 172.16.16.2
pppd[18]: Script /etc/ppp/ip-up started (pid 18819)
pppd[18]: Script /etc/ppp/ipv6-up finished (pid 18817), status = 0x0
pppd[18]: Script /etc/ppp/ip-up finished (pid 18819), status = 0x0</screen>
	</answer>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Quels sont les en-têtes du dialogue qui identifient les
		requêtes (émises|reçues), les rejets et les
		acquittements&nbsp;?</phrase></para>

		<para>Consulter les journaux système contenant les traces d'une
		connexion <acronym>PPP</acronym>.</para>
	</question>
	<answer>
		<para>La copie d'écran donnée ci-dessus fait apparaître les directives
		<literal>Conf*</literal> pour chaque paramètre négocié.</para>
		<itemizedlist>
		<listitem>
			<para><literal>ConfReq</literal> indique une requête.</para>
		</listitem>
		<listitem>
			<para><literal>ConfAck</literal> indique un acquittement.</para>
		</listitem>
		<listitem>
			<para><literal>ConfNak</literal> indique un rejet.</para>
		</listitem>
		</itemizedlist>
	</answer>
	</qandaentry>
	</qandaset>
</sect2>

<sect2 xml:id='interco.pppoe.qa.spoke.dummy-lan'>
	<title>Côté réseau local - LAN fictif</title>

	<para>En théorie, le réseau local d'extrémité desservi par le routeur
	<wordasword>Spoke</wordasword> suppose l'ajout d'un commutateur et de
	plusieurs hôtes pour caractériser l'interconnexion des différents réseaux de
	la topologie étudiée dans ces travaux pratiques. Pour éviter l'utilisation
	de matériel supplémentaire qui demande des étapes de configuration longues
	et non pertinentes, on utilise une technique très répandue&nbsp;: les interfaces
	de boucles locales. Ces interfaces viennent se substituer au réseau local
	d'extrémité.</para>

	<para>L'ajout et la configuration d'une interface de boucle locale provoque
	l'arrivée d'une nouvelle entrée dans la table de routage du routeur
	<wordasword>Spoke</wordasword>. Vu des autres réseaux de la topologie,
	cette technique permet de qualifier le bon fonctionnement d'un service
	Internet sans ajouter de matériel. Dans le cas de ces travaux pratiques,
	c'est le service Web qui est utilisé pour valider la disponibilité d'un
	réseau au niveau application.</para>

	<qandaset>
	<qandaentry>
	<question>
		<para><phrase>Quelles sont les opérations à effectuer pour pouvoir
		utiliser des interfaces réseau virtuelles de type boucle locale sur un
		système GNU/Linux&nbsp;?</phrase></para>

		<para>Avec le noyau Linux, il est conseillé d'utiliser des interfaces
		de type <wordasword>dummy</wordasword> pour ce genre d'usage. Consulter
		les pages de manuels <command>ma ip-link</command> pour obtenir la
		syntaxe de création d'une interface de ce type.</para>
	</question>
	<answer>
		<para>On commence par créer une interface à l'aide de l'instruction
		suivante.</para>

<screen><prompt>#</prompt> ip link add dummy0 type dummy</screen>

		<para>On passe ensuite à la configuration de l'interface
		<systemitem>dummy0</systemitem> comme dans l'exemple qui suit.</para>

<screen><prompt>#</prompt> ip link set dev dummy0 up
<prompt>#</prompt> ip addr add 10.2.6.1/28 brd + dev dummy0
<prompt>#</prompt> ip -6 addr add 2001:678:3fc:1a::1/64 dev dummy0
<prompt>#</prompt> ip addr ls dev dummy0
7: dummy0: &lt;BROADCAST,NOARP,UP,LOWER_UP> mtu 1500 \
			qdisc noqueue state UNKNOWN group default qlen 1000
    link/ether ce:9f:3e:c1:c5:e2 brd ff:ff:ff:ff:ff:ff
    inet 10.2.6.1/28 brd 10.2.6.15 scope global dummy0
       valid_lft forever preferred_lft forever
    inet6 2001:678:3fc:1a::1/64 scope global
       valid_lft forever preferred_lft forever
    inet6 fe80::cc9f:3eff:fec1:c5e2/64 scope link
       valid_lft forever preferred_lft forever</screen>
	</answer>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Quelles sont les opérations à effectuer pour installer un
		service Web en écoute exclusivement sur les adresses
		<acronym>IPv4</acronym> et <acronym>IPv6</acronym> de l'interface
		<option>dummy0</option>&nbsp;?</phrase></para>

		<para>Installer le paquet <systemitem>lighttpd</systemitem> et modifier
		sa configuration pour que le service ne soit accessible que sur les
		adresses de l'interface <systemitem>dummy0</systemitem>.</para>
	</question>
	<answer>
<screen><prompt>#</prompt> aptitude install lighttpd
&lt;snipped/></screen>

		<para>On modifie ensuite le fichier de configuration
		<filename>/etc/lighttpd/lighttpd.conf</filename> de façon à limiter
		l'accès aux adresses voulues.</para>

<screen><prompt>#</prompt> cd /etc/lighttpd/
<prompt>#</prompt> diff -uBb lighttpd.conf.orig lighttpd.conf
--- lighttpd.conf.orig  2018-10-07 16:37:55.579183757 +0200
+++ lighttpd.conf       2018-10-07 16:33:31.093675213 +0200
@@ -22,6 +22,9 @@
 compress.filetype           = ( "application/javascript", "text/css", "text/html", "text/plain" )

 # default listening port for IPv6 falls back to the IPv4 port
-include_shell "/usr/share/lighttpd/use-ipv6.pl " + server.port
+#include_shell "/usr/share/lighttpd/use-ipv6.pl " + server.port
 include_shell "/usr/share/lighttpd/create-mime.assign.pl"
 include_shell "/usr/share/lighttpd/include-conf-enabled.pl"
+
+server.bind = "10.2.6.1"
+$SERVER["socket"] == "[2001:678:3fc:1a::1]:80" { server.use-ipv6 = "enable" }</screen>

		<para>On redémarre le service et on affiche la liste des prises réseau
		ouvertes sur le système pour confirmer que les adresses choisies
		sont bien prises en compte.</para>

<screen><prompt>#</prompt> systemctl restart lighttpd

<prompt>#</prompt> lsof -i tcp:80
COMMAND    PID     USER   FD   TYPE  DEVICE SIZE/OFF NODE NAME
lighttpd 25745 www-data    4u  IPv4 4990017      0t0  TCP 10.2.6.1:http (LISTEN)
lighttpd 25745 www-data    5u  IPv6 4990018      0t0  TCP [2001:678:3fc:1a::1]:http (LISTEN)</screen>
	</answer>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Comment valider l'accès à ce service Web au niveau du
		routeur <wordasword>Spoke</wordasword>&nbsp;?</phrase></para>

		<para>Il s'agit de faire un test au niveau de la couche application. À
		la console, les deux outils adaptés sont <command>wget</command> et
		<command>curl</command>.</para>
	</question>
	<answer>
		<para>Voici deux exemples de tests avec <command>wget</command>.</para>

<screen><prompt>$</prompt> wget -O /dev/null http://10.2.6.1
--2018-10-07 16:50:16--  http://10.2.6.1/
Connexion à 10.2.6.1:80… connecté.
requête HTTP transmise, en attente de la réponse… <emphasis>200 OK</emphasis>
Taille : 3378 (3,3K) [text/html]
Sauvegarde en : « /dev/null »

/dev/null    100%[======================>]   3,30K  --.-KB/s    ds 0s

2018-10-07 16:50:16 (267 MB/s) — « /dev/null » sauvegardé [3378/3378]</screen>

<screen><prompt>$</prompt> wget -O /dev/null http://[2001:678:3fc:1a::1]
--2018-10-07 16:51:38--  http://[2001:678:3fc:1a::1]/
Connexion à [2001:678:3fc:1a::1]:80… connecté.
requête HTTP transmise, en attente de la réponse… <emphasis>200 OK</emphasis>
Taille : 3378 (3,3K) [text/html]
Sauvegarde en : « /dev/null »

/dev/null    100%[======================>]   3,30K  --.-KB/s    ds 0s

2018-10-07 16:51:38 (193 MB/s) — « /dev/null » sauvegardé [3378/3378]</screen>
	</answer>
	</qandaentry>
	</qandaset>
	</sect2>
</sect1>

<?custom-pagebreak?>
<sect1 xml:id='interco.pppoe.qa.routing'>
	<title>Interconnexion et routage</title>

	<para>En l'absence de routage dynamique, il est nécessaire d'implanter des
	routes par défaut, des routes statiques et de la traduction d'adresses
	source sur les routeurs de la topologie étudiée. Dans cette section, on
	veut s'assurer que les communications entre les différents réseaux
	fonctionnent correctement.</para>

	<mediaobject xml:id='interco.pppoe.qa.routing.image'>
	<imageobject role='fo'>
		<imagedata fileref='images/routing.png' format='PNG'
		width='12cm' scalefit='1' align='center'/>
	</imageobject>
	<imageobject role='html'>
		<imagedata fileref='images/routing.png' format='PNG'
		width='640px' scalefit='1' align='center'/>
	</imageobject>
	<textobject>
		<phrase>Interconnexion des différents réseaux</phrase>
	</textobject>
	<caption>
		<para><link xlink:href='images/routing.png'>Interconnexion des
		différents réseaux</link></para>
	</caption>
	</mediaobject>

	<para>Dans cette partie, on considère que le routage est déjà activé au
	niveau noyau.</para>

<sect2 xml:id='interco.pppoe.qa.routing.hub'>
	<title>Tables de routage du routeur Hub</title>

	<para>Selon la représentation simplifiée de la <link
	linkend='interco.pppoe.qa.routing.image'>topologie ci-dessus</link>, les
	tables de routage routeur <wordasword>Hub</wordasword> doivent contenir les
	éléments suivants.</para>

	<itemizedlist>
	<listitem>
		<para>Des routes par défaut <acronym>IPv4</acronym> et
		<acronym>IPv6</acronym> vers le cœur de réseau pour accéder à
		l'Internet.</para>
	</listitem>
	<listitem>
		<para>La traduction des adresses <acronym>IPv4</acronym> source en
		sortie de l'interface de connexion au cœur de réseau.</para>
	</listitem>
	<listitem>
		<para>Des routes statiques <acronym>IPv4</acronym> et
		<acronym>IPv6</acronym> vers les réseaux d'extrémité desservis par le
		routeur <wordasword>Spoke</wordasword>.</para>
	</listitem>
	</itemizedlist>

	<qandaset>
	<qandaentry>
	<question>
		<para><phrase>Comment ajouter les routes par défaut vers le cœur de
		réseau&nbsp;?</phrase></para>

		<para>Consulter l'&url.cheatsheet; ou les pages de manuels <command>man
		ip-route</command> et rechercher la syntaxe relative aux route par
		défaut sachant que les adresses de passerelle sont données à la <xref
		linkend='interco.pppoe.qa.hub-and-spoke'/>.</para>
	</question>
	<answer>
		<para>Pour les réseaux <acronym>IPv4</acronym>, la syntaxe est la
		suivante.</para>

<screen><prompt>#</prompt> ip route add default via 172.16.16.2</screen>

<screen><prompt>#</prompt> ip route ls dev eth0.4
default via 172.16.16.2
172.16.16.0/20 proto kernel scope link src 172.16.16.59</screen>

<screen><prompt>#</prompt> ip route get 9.9.9.9
9.9.9.9 via 172.16.16.2 dev eth0.4 src 172.16.16.59 uid 1000</screen>

		<para>Pour les réseaux <acronym>IPv6</acronym>, la syntaxe est la
		suivante.</para>

<screen><prompt>#</prompt> ip -6 route add default via 2001:678:3fc:4::2</screen>

<screen><prompt>#</prompt> ip -6 route ls dev eth0.4
2001:678:3fc:4::/64 proto kernel metric 256 pref medium
fe80::/64 proto kernel metric 256 pref medium
default via 2001:678:3fc:4::2 metric 1024 pref medium</screen>

<screen><prompt>#</prompt> ip route get 2620:fe::fe
2620:fe::fe from :: via 2001:678:3fc:4::2 dev eth0.4 src 2001:678:3fc:4::3b metric 1024 pref medium</screen>
	</answer>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Comment activer la traduction des adresses source
		<acronym>IPv4</acronym> des paquets sortant par l'interface située sur
		le <acronym>VLAN</acronym> d'accès au coeur de
		réseau&nbsp;?</phrase></para>

		<para>Consulter les pages de manuels de la commande
		<command>iptables</command>.</para>
	</question>
	<answer>
		<para>La traduction des adresses source <acronym>IPv4</acronym>
		s'applique dans la chaîne <option>POSTROUTING</option> de la table
		<option>nat</option> et le traitement est appelé
		<option>MASQUERADE</option>. La syntaxe est la suivante.</para>

<screen><prompt>#</prompt> iptables -t nat -A POSTROUTING -o eth0.4 -j MASQUERADE</screen>

		<para>On vérifie la présence de la règle de traduction d'adresse à
		l'aide de la commande suivante.</para>

<screen><prompt>#</prompt> iptables -t nat -vnL POSTROUTING
Chain POSTROUTING (policy ACCEPT 50 packets, 3000 bytes)
 pkts bytes target     prot opt in     out     source               destination
  587 41926 MASQUERADE  all  --  *      eth0.4  0.0.0.0/0            0.0.0.0/0</screen>

		<para>On consulte la table des enregistrements de suivi d'état à l'aide
		de la commande <command>conntrack</command> fournie avec le paquet du
		même nom.</para>

<screen><prompt>#</prompt> conntrack -L | grep icmp
icmp     1 29 src=192.168.1.30 dst=9.9.9.9 type=8 code=0 id=30606 \
			src=9.9.9.9 dst=172.16.16.59 type=0 code=0 id=30606 mark=0 use=1
conntrack v1.4.5 (conntrack-tools): 36 flow entries have been shown.</screen>
	</answer>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Comment assurer le routage des paquets vers le réseau
		local d'extrémité <wordasword>Branch</wordasword> desservi par le
		routeur <wordasword>Spoke</wordasword>&nbsp;?</phrase></para>

		<para>Consulter l'&url.cheatsheet; ou les pages de manuels <command>man
		ip-route</command> et rechercher la syntaxe relative aux route
		statiques.</para>
	</question>
	<answer>
		<para>Comme les communications entre les routeurs
		<wordasword>Hub</wordasword> et <wordasword>Spoke</wordasword> se font
		via un lien point à point, on peut utiliser directement le nom
		d'interface pour la prise décision sur l'acheminement des
		paquets.</para>

		<para>Pour le réseau <acronym>IPv4</acronym>, la syntaxe est la
		suivante.</para>

<screen><prompt>#</prompt> ip route add 10.2.6.0/28 dev ppp0</screen>

		<para>On valide ensuite les communications à destination de l'interface
		fictive <systemitem>dummy0</systemitem> du routeur
		<wordasword>Spoke</wordasword> depuis le routeur
		<wordasword>Hub</wordasword>.</para>

<screen><prompt>#</prompt> ping -qc2 10.2.6.1
PING 10.2.6.1 (10.2.6.1) 56(84) bytes of data.

--- 10.2.6.1 ping statistics ---
2 packets transmitted, 2 received, <emphasis>0% packet loss</emphasis>, time 2ms
rtt min/avg/max/mdev = 1.043/1.133/1.224/0.096 ms</screen>

		<para>Pour le réseau <acronym>IPv6</acronym>, la syntaxe est la
		suivante.</para>

<screen><prompt>#</prompt> ip -6 route add 2001:678:3fc:1a::/64 dev ppp0</screen>

		<para>On valide ensuite les communications de la même façon que pour
		les paquets <acronym>IPv4</acronym>.</para>

<screen><prompt>#</prompt> ping -qc2 2001:678:3fc:1a::1
PING 2001:678:3fc:1a::1(2001:678:3fc:1a::1) 56 data bytes

--- 2001:678:3fc:1a::1 ping statistics ---
2 packets transmitted, 2 received, <emphasis>0% packet loss</emphasis>, time 3ms
rtt min/avg/max/mdev = 1.186/1.246/1.306/0.060 ms</screen>
	</answer>
	</qandaentry>
	</qandaset>
</sect2>

<sect2 xml:id='interco.pppoe.qa.routing.spoke'>
	<title>Tables de routage du routeur Spoke</title>

	<para>Selon la représentation simplifiée de la <link
	linkend='interco.pppoe.qa.routing.image'>topologie ci-dessus</link>, les
	tables de routage routeur <wordasword>Spoke</wordasword> ne doivent
	contenir que des routes par défaut.</para>

	<qandaset>
	<qandaentry>
	<question>
		<para><phrase>Comment ajouter les routes par défaut vers le routeur
		<wordasword>Hub</wordasword>&nbsp;?</phrase></para>

		<para>Consulter l'&url.cheatsheet; ou les pages de manuels <command>man
		ip-route</command> et rechercher la syntaxe relative aux route par
		défaut.</para>
	</question>
	<answer>
		<para>Comme les communications entre les routeurs
		<wordasword>Spoke</wordasword> et <wordasword>Hub</wordasword> se font
		via un lien point à point, on peut utiliser directement le nom
		d'interface pour la prise décision sur l'acheminement des
		paquets.</para>

		<para>Pour les réseaux <acronym>IPv4</acronym>, la syntaxe est la
		suivante.</para>

<screen><prompt>#</prompt> ip route add default dev ppp0</screen>

<screen><prompt>#</prompt> ip route ls dev ppp0
default scope link
192.168.1.29 proto kernel scope link src 192.168.1.30</screen>

<screen><prompt>#</prompt> ip route get 9.9.9.9
9.9.9.9 dev ppp0 src 192.168.1.30 uid 0</screen>

		<para>Pour les réseaux <acronym>IPv6</acronym>, la syntaxe est la
		suivante.</para>

<screen><prompt>#</prompt> ip -6 route add default dev ppp0</screen>

<screen><prompt>#</prompt> ip -6 route ls dev ppp0
none fe80::/10 metric 1 pref medium
fe80::/10 proto kernel metric 256 pref medium
default metric 1024 pref medium</screen>

<screen><prompt>#</prompt> ip route get 2620:fe::fe
2620:fe::fe from :: dev ppp0 src 2001:678:3fc:1a::1 metric 1024 pref medium</screen>
	</answer>
	</qandaentry>

	<qandaentry>
	<question>
		<para><phrase>Comment les routes par défaut sont attribuées vis-à-vis
		de l'établissement d'une session
		<acronym>PPP</acronym>&nbsp;?</phrase></para>

		<para>Consulter les pages de manuels du démon
		<application>pppd</application> et rechercher dans l'arborescence des
		scripts de ce même démon, les options ou les commandes de manipulation
		des routes par défaut.</para>
	</question>
	<answer>
		<para>Pour <acronym>IPv4</acronym>, la réponse est fournie par les
		options du démon <application>pppd</application> paramétrées dans le
		fichier <filename>/etc/ppp/peers/pppoe-provider</filename>. Ce fichier
		contient la directive <option>defaultroute</option> qui attribue la
		route par défaut lors de l'établissement de la session
		<acronym>PPP</acronym>.</para>

		<para>Pour <acronym>IPv6</acronym>, il n'existe pas de paramètre qui
		permet d'établir la route par défaut avec la session
		<acronym>PPP</acronym>. Il faut donc créer un script qui est appelé
		lors de l'établissement de session. Le répertoire dédié à ces
		opérations est nommé <filename
		class='directory'>/etc/ppp/ipv6-up.d/</filename>. Voici un exemple de
		script appelé <filename>/etc/ppp/ipv6-up.d/defaultroute</filename> qui
		ajoute la route par défaut à chaque nouvelle session.</para>

<screen><prompt>#</prompt> cat /etc/ppp/ipv6-up.d/defaultroute
#!/bin/sh -e

if [ -z "${CONNECT_TIME}" ]; then
        ip -6 route add default dev ${PPP_IFACE}
fi</screen>

		<para>Attention ! Ce script doit être exécutable.</para>

<screen><prompt>#</prompt> chmod +x /etc/ppp/ipv6-up.d/defaultroute</screen>
	</answer>
	</qandaentry>
	</qandaset>

</sect2>
</sect1>

<sect1 xml:id='interco.pppoe.qa.refdocs'>
	<title>Documents de référence</title>

	<variablelist>
	<varlistentry xml:id='interco.pppoe.qa.rfc1661'>
		<term><citetitle>The Point-to-Point Protocol (PPP)</citetitle></term>
		<listitem>
		<para>&url.rfc1661;&nbsp;: Le protocole point-à-point <acronym>PPP</acronym>
		fournit une méthode standard de transport de datagrammes
		multi-protocoles sur des liaisons point à point. <acronym>PPP</acronym>
		comprend 3 composants principaux&nbsp;:</para>

		<orderedlist>
		<listitem>
			<para>Une méthode d'encapsulation des datagrammes
			multi-protocoles.</para>
		</listitem>
		<listitem>
		<para>Un protocole de contrôle de niveau liaison ou <wordasword>Link
		Control Protocol</wordasword> (<acronym>LCP</acronym>) pour établir,
		configurer et tester une connexion de données à ce niveau.</para>
		</listitem>
		<listitem>
		<para>Une famille de protocoles de contrôle de niveau réseau pour
		établir et configurer différents protocoles de niveau réseau.</para>
		</listitem>
		</orderedlist>
		</listitem>
	</varlistentry>

	<varlistentry xml:id='interco.pppoe.qa.config.interface.lan'>
		<term><citetitle>Configuration d'une interface de réseau
		local</citetitle></term>
		<listitem>
		<para>&url.config.interface.lan;&nbsp;: identification du type d'interface,
		de ses caractéristiques et manipulations des paramètres. Ce support
		fournit une méthodologie de dépannage simple d'une connexion
		réseau.</para>
		</listitem>
	</varlistentry>
		
	<varlistentry xml:id='interco.pppoe.qa.fonctions.noyau'>
		<term><citetitle>Fonctions réseau du noyau Linux</citetitle></term>
		<listitem>
		<para>&url.interco.kernel;&nbsp;: présentation et configuration des
		fonctions réseau du noyau LINUX.</para>
		</listitem>
	</varlistentry>
	</variablelist>
</sect1>
</article>
